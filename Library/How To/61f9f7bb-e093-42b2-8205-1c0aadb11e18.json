{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "-1901013343",
      "Content_Hash": "-566366949"
    },
    "Metadata": [
      {
        "Id": [
          "61f9f7bb-e093-42b2-8205-1c0aadb11e18"
        ],
        "Id_History": [
          "61f9f7bb-e093-42b2-8205-1c0aadb11e18,ba6c07b9-f5d0-445f-9282-ea8263fc814a,"
        ],
        "Library_Id": [
          "be5273b1-d682-4361-99d9-6234f2d47eb7"
        ],
        "Title": [
          "0sink junk How to Authorize Users Against the SQL Role Provider"
        ],
        "Category": [
          "Authorization"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          "WCF"
        ],
        "Type": [
          "How To"
        ],
        "DirectLink": [
          "How to Authorize Users Against the SQL Role Provider"
        ],
        "Tag": [
          "WCF 3.5"
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          "J.D. Meier, Jason Taylor, Prashant Bansode, Carlos Farre, Madhu Sundararajan, Rob Boucher, Steve Gregersen"
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>Applies to</h1>\r\n  <ul>\r\n    <li>Microsoft&amp;#174; Windows Communication Foundation (WCF) 3.5 <li>Microsoft Visual Studio&amp;#174; 2008</li></li>\r\n  </ul>\r\n  <h1>Description</h1>\r\n  <p>If you store role information in SQL Server, configure your application to use the SqlRoleProvider for authorization. The role provider allows you to load the roles for users without writing and maintaining custom code.</p>\r\n  <p>Use the following steps to enable SQL Server Role authorization to provide role-based authorization:</p>\r\n  <ol>\r\n    <li>Enable the Role provider as shown below and configure the connection string pointing to the role store in SQL server<ol><pre>&amp;#8230;<br />&lt;configuration&gt;<br />&amp;#8230;<br />&lt;connectionStrings&gt;<br />    &lt;add name=\"MyLocalSQLServer\"<br />         connectionString=\"Initial Catalog=aspnetdb;data source=Sqlserver;Integrated Security=SSPI;\"</pre><pre>&lt;system.web&gt;<br />&lt;roleManager enabled=\"true\" defaultProvider=\"MySqlRoleProvider\" &gt;<br />      &lt;providers&gt;<br />        &lt;add name=\"MySqlRoleProvider\"<br />             connectionStringName=\"MyLocalSQLServer\"<br />             applicationName=\"MyAppName\"<br />             type=\"System.Web.Security.SqlRoleProvider\" /&gt;<br />      &lt;/providers&gt;<br />    &lt;/roleManager&gt;<br />&lt;system.web&gt;</pre></ol><li>Configure the Service Behavior. Set the principalPermissionMode attribute as UseAspNetRoles and the roleProviderName attribute to MySqlRoleProvider.<ol><pre>&amp;#8230;<br />&lt;system.serviceModel&gt;<br />    &lt;behaviors&gt;<br />      &lt;serviceBehaviors&gt;<br />        &lt;behavior name=\"BehaviorConfiguration\"&gt;<br />          &lt;serviceAuthorization principalPermissionMode=\"UseAspNetRoles\"<br />            roleProviderName=\"MySqlRoleProvider\" /&gt;          <br />         &lt;/behavior&gt;<br />      &lt;/serviceBehaviors&gt;<br />    &lt;/behaviors&gt;<br />&lt;services&gt;<br />    &lt;service behaviorConfiguration=\" BehaviorConfiguration \" name=\"MyService\"&gt;<br />      &lt;endpoint binding=\"wsHttpBinding\" bindingConfiguration=\"\"<br />        name=\"httpsendpoint\" contract=\"IMyService2\" /&gt;<br />     &lt;/service&gt;<br />  &lt;/services&gt;<br />  &lt;/system.serviceModel&gt;</pre></ol><li>Authorize windows groups declaratively by adding the PrincipalPermission attribute above each service method that requires authorization. Specify the Windows user group required to access the method in the Role field.<ol><pre>&amp;#91;PrincipalPermission(SecurityAction.Demand, Role = \"accounting\")&amp;#93;<br />public double Add(double a, double b)<br />&amp;#123;<br />    return a &amp;#43; b;<br />&amp;#125;<br /></pre></ol></li></li></li>\r\n  </ol>\r\n  <h1>Additional Resources</h1>\r\n  <ul>\r\n    <li>For more information on authorization, see &amp;#8220;Authorization&amp;#8221; at <a href=\"http://msdn2.microsoft.com/en-us/library/ms733071.aspx\">http://msdn2.microsoft.com/en-us/library/ms733071.aspx</a><li>For authorization Q&amp;A, see the Authorization section of &amp;#8220;WCF 3.5 Questions and Answers &amp;#8220; at <a href=\"http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=WCF&amp;#37;20Security&amp;#37;20Guidelines&amp;referringTitle=Home\">http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=WCF&amp;#37;20Security&amp;#37;20Guidelines&amp;referringTitle=Home</a></li></li>\r\n  </ul>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns &amp; practices guidance.</p>"
        ]
      }
    ]
  }
}