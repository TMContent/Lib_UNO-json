{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "1053005129",
      "Content_Hash": "1231242999"
    },
    "Metadata": [
      {
        "Id": [
          "a9e037d8-ed6c-4411-916c-297a4b5bbb04"
        ],
        "Id_History": [
          "a9e037d8-ed6c-4411-916c-297a4b5bbb04,f868688b-a3da-4aad-a8c5-4cf4ade34bc7,"
        ],
        "Library_Id": [
          "92718d53-36b2-47bc-b6f5-e60994385f46"
        ],
        "Title": [
          "How to Apply Security Policy To Dynamically Created Assemblies"
        ],
        "Category": [
          "Code Access Security"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          ".NET 3.5"
        ],
        "Type": [
          "How To"
        ],
        "DirectLink": [
          "How to Apply Security Policy To Dynamically Created Assemblies"
        ],
        "Tag": [
          ""
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          ""
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>Description</h1>\n  <p>To apply security policy to a dynamically created assembly, use the overload of the <b>AppDomain.DefineDynamicAssembly</b> method that accepts three permission sets and evidence as shown below. </p>\n  <pre>public sealed AssemblyBuilder DefineDynamicAssembly(<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AssemblyName name, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AssemblyBuilderAccess access, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Evidence evidence, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PermissionSet requiredPermissions, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PermissionSet optionalPermissions, <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PermissionSet refusedPermissions<br />);<br /></pre>\n  <p>You can pass required, optional, and refused permission sets to apply security policy to the dynamic assembly. Passing evidence forces the CLR to evaluate the permission set for the created dynamic assembly. </p>\n  <blockquote>\n    <b>Note</b>&nbsp;&nbsp;&nbsp;If you use an overload that does not accept evidence, then the CLR does not evaluate the permission set for the dynamic assembly. Instead the permission set is inherited from the permission set of the assembly that is emitting the code.</blockquote>\n  <hr />\n  <p>Adapted from Microsoft patterns & practices guidance.</p>"
        ]
      }
    ]
  }
}