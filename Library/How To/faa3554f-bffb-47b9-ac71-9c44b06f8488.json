{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "1500796372",
      "Content_Hash": "-1367848815"
    },
    "Metadata": [
      {
        "Id": [
          "faa3554f-bffb-47b9-ac71-9c44b06f8488"
        ],
        "Id_History": [
          "faa3554f-bffb-47b9-ac71-9c44b06f8488,2d163cb4-9330-478d-bcc5-dedd2bfbd292,"
        ],
        "Library_Id": [
          "be5273b1-d682-4361-99d9-6234f2d47eb7"
        ],
        "Title": [
          "[VERIFYME] How to Enable WCF Message Logging"
        ],
        "Category": [
          "Auditing and Logging"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          "WCF"
        ],
        "Type": [
          "How To"
        ],
        "DirectLink": [
          "How to Enable WCF Message Logging"
        ],
        "Tag": [
          "WCF 3.5"
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          "J.D. Meier, Jason Taylor, Prashant Bansode, Carlos Farre, Madhu Sundararajan, Rob Boucher, Steve Gregersen"
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>Applies to</h1>\r\n  <ul>\r\n    <li>Microsoft® Windows Communication Foundation (WCF) 3.5 \r\n<li>Microsoft Visual Studio® 2008</li></li>\r\n  </ul>\r\n  <h1>Description</h1>\r\n  <p>You can enable message logging to log the messages processed by your service. Message logging can be used to diagnose your applications and analyze the root cause of problems. Message logging is not turned on by default. Turn on message logging by setting attributes on the &lt;messagelogging&gt; element in your configuration file and add a trace listener to log the events to a file.</p>\r\n  <p>Use the following steps to enable WCF message logging:</p>\r\n  <ol>\r\n    <li>Open the web.config file of the WCF service using the Configuration editor tool (SvcConfigEditor.exe).\r\n<li>In the Configuration editor, navigate to the Diagnostics node, and click the Enable Message Logging link. \r\n<li>This enables the message logging for your service and it also creates a listener (ServiceModelMessageLoggingListener) and a source (System.ServiceModel.MessageLogging) under the Listeners and Sources folder respectively. </li></li></li>\r\n  </ol>\r\n  <p>You can configure Message logging levels at both the service and the transport levels. To configure the message logging levels,</p>\r\n  <ol>\r\n    <li>In the left pane, select MessageLogging under the Diagnostics node.\r\n<li>Set the LogMessagesAtServiceLevel attribute to True choosing from the drop down. The LogMessagesAtTransportLevel attribute is True by default.</li></li>\r\n  </ol>\r\n  <p>To determine where the messages will be logged select ServiceModelMessageLoggingListener under the Listeners node and note the value of the InitData attribute. The default location where messages are logged is c:\\inetpub\\wwwroot\\WCFService\\web_messages.svclog.</p>\r\n  <p>The configuration file should look as follows:</p>\r\n  <pre> &lt;system.diagnostics&gt;<br /></pre>\r\n  <pre>  &lt;sources&gt;<br />   &lt;source name=\"System.ServiceModel.MessageLogging\" switchValue=\"Warning, ActivityTracing\"&gt;<br />    &lt;listeners&gt;<br />     &lt;add type=\"System.Diagnostics.DefaultTraceListener\" name=\"Default\"&gt;<br />       &lt;filter type=\"\" /&gt;<br />     &lt;/add&gt;<br />     &lt;add name=\"ServiceModelMessageLoggingListener\"&gt;<br />       &lt;filter type=\"\" /&gt;<br />     &lt;/add&gt;<br />    &lt;/listeners&gt;<br />   &lt;/source&gt;<br />  &lt;/sources&gt;<br /></pre>\r\n  <pre>  &lt;sharedListeners&gt;<br />   &lt;add initializeData=\"c:\\inetpub\\wwwroot\\auditingwcf\\web_messages.svclog\"<br />        type=\"System.Diagnostics.XmlWriterTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\"<br />        name=\"ServiceModelMessageLoggingListener\" traceOutputOptions=\"Timestamp\"&gt;<br />          &lt;filter type=\"\" /&gt;<br />   &lt;/add&gt;<br />  &lt;/sharedListeners&gt;</pre>\r\n  <pre>&lt;/system.diagnostics&gt;</pre>\r\n  <pre>&lt;system.serviceModel&gt;<br /> &lt;diagnostics&gt;<br />   &lt;messageLogging logMalformedMessages=\"true\" logMessagesAtServiceLevel=\"true\"<br />                   logMessagesAtTransportLevel=\"true\" /&gt;<br /> &lt;/diagnostics&gt;<br /></pre>\r\n  <h1>Additional Resources</h1>\r\n  <ul>\r\n    <li>For more information on auditing, see “Auditing Security Events” at <a href=\"http://msdn2.microsoft.com/en-us/library/ms731669.aspx\">http://msdn2.microsoft.com/en-us/library/ms731669.aspx</a><li>For message logging information, see “Message Logging” at <a href=\"http://msdn2.microsoft.com/en-us/library/ms731859.aspx\">http://msdn2.microsoft.com/en-us/library/ms731859.aspx</a><li>For more information see “How to: Audit Windows Communication Foundation Security Events” at <a href=\"http://msdn2.microsoft.com/en-us/library/ms734737.aspx\">http://msdn2.microsoft.com/en-us/library/ms734737.aspx</a><li>For auditing Guidelines, see the Auditing &amp; Logging section of “WCF 3.5 Guidelines “ at <a href=\"http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=WCF%20Security%20Guidelines&amp;referringTitle=Home\">http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=WCF%20Security%20Guidelines&amp;referringTitle=Home</a></li></li></li></li>\r\n  </ul>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns &amp; practices guidance.</p>"
        ]
      }
    ]
  }
}