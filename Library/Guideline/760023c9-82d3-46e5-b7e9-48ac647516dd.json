{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "1026929008",
      "Content_Hash": "-341865984"
    },
    "Metadata": [
      {
        "Id": [
          "760023c9-82d3-46e5-b7e9-48ac647516dd"
        ],
        "Id_History": [
          "760023c9-82d3-46e5-b7e9-48ac647516dd,d1993409-22b7-46a1-83d8-328740c04369,"
        ],
        "Library_Id": [
          "be5273b1-d682-4361-99d9-6234f2d47eb7"
        ],
        "Title": [
          "Run Your Service in a Least Privileged Account"
        ],
        "Category": [
          "Hardening"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          "WCF"
        ],
        "Type": [
          "Guideline"
        ],
        "DirectLink": [
          "Run Your Service in a Least Privileged Account"
        ],
        "Tag": [
          "WCF 3.5"
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          "J.D. Meier, Jason Taylor, Prashant Bansode, Carlos Farre, Madhu Sundararajan, Rob Boucher, Steve Gregersen"
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>Applies to</h1>\r\n  <ul>\r\n    <li>Microsoft&#174; Windows Communication Foundation (WCF) 3.5 <li>Microsoft Visual Studio&#174; 2008</li></li>\r\n  </ul>\r\n  <h1>What to Do</h1>\r\n  <p>If you are hosting your WCF service in a Windows service or in IIS, run your service using a least privileged service account.</p>\r\n  <h1>Why</h1>\r\n  <p>This will reduce attack surface and constrain the impact of malicious attack. </p>\r\n  <h1>How</h1>\r\n  <p>IIS by default is run under the ASPNET (in IIS5) or NetworkService account (in IIS6).&nbsp; </p>\r\n  <p>By using a custom domain account, you can audit and authorize your service individually, and your service is protected from changes made to the privileges and permissions within the System account. Configure your account to use the least privileges necessary to allow your service to run. </p>\r\n  <p>The following steps outline how to use a least privileged custom domain account:</p>\r\n  <ol>\r\n    <li>Create a Windows account.<li>Run the following aspnet_regiis.exe command to assign the relevant ASP.NET permissions to the account: <br />aspnet_regiis.exe -ga machineName\\userName&nbsp;<br /><strong>Note</strong>: This step is needed only if your application needs to run in ASP.NET compatibility mode<li>Use the Local Security Policy tool to grant the Windows account the Deny logon locally user right. This reduces the privileges of the account and prevents anyone logging onto Windows locally with this account.&nbsp; <li>If your service is hosted in Windows Service, configure the Windows Service to run using the account identity, the WCF service will run under the security context of the Windows Service.<li>If your service is hosted in IIS 6.0, use IIS Manager to create an application pool running as an account identity. Use IIS Manager to assign your WCF Service to that application pool.<br /></li></li></li></li></li>\r\n  </ol>\r\n  <h1>Additional Resources</h1>\r\n  <ul>\r\n    <li>For more hosting information, see &#8220;Hosting&#8221; at <a href=\"http://msdn2.microsoft.com/en-us/library/ms729846.aspx\">http://msdn2.microsoft.com/en-us/library/ms729846.aspx</a><li>For more information on running IIS under a least privileged service account, see &#8220;How To: Create a Service Account for an ASP.NET 2.0 Application&#8221; at <a href=\"http://msdn2.microsoft.com/en-us/library/ms998297.aspx\">http://msdn2.microsoft.com/en-us/library/ms998297.aspx</a><li>For hosting Q&A, see the Hosting section of &#8220;WCF 3.5 Questions and Answers &#8220; at <a href=\"http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=WCF&#37;20Questions&#37;20and&#37;20Answers&#37;20&#37;28Q&#37;26A&#37;29&referringTitle=Home\">http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=WCF&#37;20Questions&#37;20and&#37;20Answers&#37;20&#37;28Q&#37;26A&#37;29&referringTitle=Home</a></li></li></li>\r\n  </ul>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns & practices guidance.</p>"
        ]
      }
    ]
  }
}