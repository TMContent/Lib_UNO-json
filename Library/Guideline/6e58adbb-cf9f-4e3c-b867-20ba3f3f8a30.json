{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "-742303767",
      "Content_Hash": "-1890805816"
    },
    "Metadata": [
      {
        "Id": [
          "6e58adbb-cf9f-4e3c-b867-20ba3f3f8a30"
        ],
        "Id_History": [
          "6e58adbb-cf9f-4e3c-b867-20ba3f3f8a30,cbc4037f-248f-490b-898d-574752223410,"
        ],
        "Library_Id": [
          "26bd1a04-beed-4a66-917d-b6ab0a7d634c"
        ],
        "Title": [
          "Use Windows Authentication When Connecting to SQL Server"
        ],
        "Category": [
          "Database Security"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          ".NET"
        ],
        "Type": [
          "Guideline"
        ],
        "DirectLink": [
          "Use Windows Authentication When Connecting to SQL Server"
        ],
        "Tag": [
          ""
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          ""
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>Applies To</h1>\r\n  <ul>\r\n    <li>ASP.NET 4.0</li>\r\n  </ul>\r\n  <h1>What to Do</h1>\r\n  <p>Use&nbsp;Windows authentication when connecting to SQL Server&nbsp;to gain security advantages over other authentication&nbsp;methods such as mirrored local accounts&nbsp;or impersonation/delegation. </p>\r\n  <h1>Why</h1>\r\n  <p>You do not need to embed user names and passwords in the database connection string when using Windows Authentication.&nbsp;With Windows Authentication, you also&nbsp;benefit from centralized account management. </p>\r\n  <h1>When</h1>\r\n  <p>Use Windows authentication whenever possible.&nbsp; However, you might not be able to use Windows authentication if your database client and database server are separated by a firewall which prevents Kerberos or NTLM authentication, or your application server and database server are in separate domains with no trust. In these situations, you can use either mirrored local accounts or Impersonation/Delegation. Mirrored local accounts&nbsp;are a better choice under most circumstances.&nbsp;</p>\r\n  <h1>How</h1>\r\n  <p>To connect to SQL Server using Windows authentication, perform the following steps:</p>\r\n  <ol>\r\n    <li>\r\n      <p>\r\n        <strong>Configure a connection string.</strong> For ASP.NET applications, you should store connection strings in the &lt;<em>connectionStrings</em>&gt; section of your application's <em>Web.config</em> file. The connection string used with Windows authentication must include either the <strong>Trusted_Connection=Yes</strong> attribute, or the equivalent attribute <em>Integrated Security=SSPI</em>:</p>\r\n      <pre>&nbsp;&lt;connectionStrings&gt;<br />&nbsp; &lt;add name=\"MyLocalSQLServer\" <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; connectionString=\"Initial Catalog=pubs;User Id=sa;Password=asdasd;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; data source=localhost;Integrated Security=SSPI;\"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; providerName=\"System.Data.SqlClient\"/&gt;<br />&lt;/connectionStrings&gt;</pre>\r\n    </li>\r\n    <li>\r\n      <p>\r\n        <strong>Encrypt the connection string.</strong> Even though database connection strings for Windows authentication do not contain usernames and passwords, you should still encrypt them in <em>Web.config</em> to reduce the possibility of disclosing server names and database names. </p>\r\n      <p>To encrypt the <em>connectionStrings</em> section&nbsp;with the Machine Store, run the following command from a .NET command prompt:</p>\r\n      <pre>aspnet_regiis -pe \"connectionStrings\" -app \"/MachineDPAPI\" -prov \"DataProtectionConfigurationProvider\" </pre>\r\n    </li>\r\n    <li>\r\n      <p>\r\n        <strong>Configure SQL Server security.</strong> You need to create a SQL Server login for your application's service account, and grant restricted permissions to access your database. You should restrict access to specific database objects, such as stored procedures. </p>\r\n    </li>\r\n    <li>\r\n      <p>\r\n        <strong>Test security access.</strong> Test database access that appropriate database permissions are available. Just as important, test that permissions unnecessary to the application's operations are denied.&nbsp;</p>\r\n    </li>\r\n  </ol>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns & practices guidance. </p>"
        ]
      }
    ]
  }
}