{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "1787855332",
      "Content_Hash": "-1558692763"
    },
    "Metadata": [
      {
        "Id": [
          "a273922d-affe-41b9-bb85-7b96157442f8"
        ],
        "Id_History": [
          "a273922d-affe-41b9-bb85-7b96157442f8,5b32b63a-e222-47d3-81a5-738c0b7d9f66,"
        ],
        "Library_Id": [
          "92718d53-36b2-47bc-b6f5-e60994385f46"
        ],
        "Title": [
          "Implement AfterReceiveRequest Method to Validate Inbound Messages on the Service"
        ],
        "Category": [
          "Input and Data Validation"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          "WCF"
        ],
        "Type": [
          "Guideline"
        ],
        "DirectLink": [
          "Implement AfterReceiveRequest Method to Validate Inbound Messages on the Service"
        ],
        "Tag": [
          "WCF 3.5"
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          "J.D. Meier, Jason Taylor, Prashant Bansode, Carlos Farre, Madhu Sundararajan, Rob Boucher, Steve Gregersen"
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>Applies to</h1>\n  <ul>\n    <li>Microsoft® Windows Communication Foundation (WCF) 3.5 \n<li>Microsoft Visual Studio® 2008</li></li>\n  </ul>\n  <h1>What to Do</h1>\n  <p>If you need to perform validation on service of inbound messages implement the AfterReceiveRequest of the interface IDispatchMessageInspector of the message inspector.</p>\n  <h1>Why</h1>\n  <p>This will validate the message after client request has arrived and before service operation invocation and deserialization.</p>\n  <h1>When</h1>\n  <p>Inbound message validation will be required if you want to validate the message, when it is received by the client and it is validated before invoking the operations in the service. </p>\n  <h1>How</h1>\n  <p>Input data validation represents one line of defense in the protection of your WCF application. Validate all parameters exposed in WCF service operations to protect the service from attack by a malicious client</p>\n  <p>Following example shows how to implement the AfterReceiveRequest Method:</p>\n  <pre>object IDispatchMessageInspector.AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)<br />{<br />    try<br />    {<br />        validateMessage(ref request);<br />    }      <br />    catch (FaultException e)<br />    {<br />        throw new FaultException&lt;string&gt;(e.Message);<br />    }<br />    return null;<br /><br />}</pre>\n  <h1>Additional Resources</h1>\n  <ul>\n    <li>For more information, see “How to: Inspect and Modify Messages on the Service” at <a href=\"http://msdn2.microsoft.com/en-us/library/ms733104.aspx\">http://msdn2.microsoft.com/en-us/library/ms733104.aspx</a><li>For more information, see “How to: Inspect or Modify Parameters” at <a href=\"http://msdn2.microsoft.com/en-us/library/ms733747.aspx\">http://msdn2.microsoft.com/en-us/library/ms733747.aspx</a></li></li>\n  </ul>\n  <hr />\n  <p>Adapted from Microsoft patterns & practices guidance.</p>"
        ]
      }
    ]
  }
}