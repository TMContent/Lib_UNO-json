{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "-508005635",
      "Content_Hash": "-1580889046"
    },
    "Metadata": [
      {
        "Id": [
          "3c5d8485-26ea-4fca-a76b-6a2f1c5c4509"
        ],
        "Id_History": [
          "3c5d8485-26ea-4fca-a76b-6a2f1c5c4509,fbc02acc-c8c2-4f07-b253-87caeee50a37,"
        ],
        "Library_Id": [
          "92718d53-36b2-47bc-b6f5-e60994385f46"
        ],
        "Title": [
          "Create a Custom Trust Policy If Your Application Needs Additional Permissions"
        ],
        "Category": [
          "Code Access Security"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          ".NET 3.5"
        ],
        "Type": [
          "Guideline"
        ],
        "DirectLink": [
          "Create a Custom Trust Policy If Your Application Needs Additional Permissions"
        ],
        "Tag": [
          "ASP.NET,ASP.NET 3.5,ASP"
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          "2"
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>What to Do</h1>\n  <p>Ensure that applications run at the lowest possible trust level. If the provided trust levels do not match the permissions an application needs, create a custom trust level to&nbsp;grant&nbsp;the&nbsp;minimum privilege set it can operate with. </p>\n  <h1>Why</h1>\n  <p>If an application is given unnecessary permissions, those additional privileges&nbsp;might provide avenues of&nbsp; attack that allow the applications's executing context to carry out operations that should not be permitted on behalf of the user.&nbsp; </p>\n  <p>Creating&nbsp; a custom trust level allows you&nbsp;to incrementally limit your exposure to security&nbsp;attacks and provides&nbsp;extra degrees of appication isolation.&nbsp;</p>\n  <h1>When</h1>\n  <p>Use a custom trust policy whenever&nbsp;an application&nbsp;needs&nbsp;privileges that&nbsp;are between established&nbsp;trust levels such as medium and high. For example, if your application is in a hosted environment it should typically run at the medium trust level. But what if the application also needs write access to event logs, which is only permitted in High trust level? The solution is to create a custom trust level to accomodate that need, while still denying access to the other capabilities granted by the High trust level. In hosted environments, you are unlikely to be able to use this approach to customize the trust level, because policy restrictions are most likely rigid. </p>\n  <h1>How</h1>\n  <p>To create a custom policy, perform the following steps: </p>\n  <ul>\n    <li>Use the Minimum Grant Set Determination tool (Permcalc.exe)&nbsp;to estimate the permissions callers must be granted to access the public entry points of an assembly.</li>\n  </ul>\n  <pre>    PermCalc &#91;options&#93; assemblyName &#91;assemblyDependencyName&#8230;&#93;s</pre>\n  <ul>\n    <li>Copy the trust level policy file that most closely matches your application's permission requirements to create a new custom policy file. <li>Locate this file in the standard policy file directory, which is &#37;Windir&#37;\\Microsoft.NET\\Framework\\&#123;Version&#125;\\CONFIG. Then add the required additional permissions to the custom policy file and configure your application to run using the custom policy. <li>Configure your application to run using the custom trust policy defined in the previous steps.&nbsp;</li></li></li>\n  </ul>\n  <h1>Additional Resources</h1>\n  <ul>\n    <li>Permissions calculator tool <a href=\"http://msdn2.microsoft.com/en-us/library/ms165077.aspx\">http://msdn2.microsoft.com/en-us/library/ms165077.aspx</a></li>\n  </ul>\n  <h1>Related Rules</h1>\n  <ul>\n    <li>\n      <a href=\"/article/743a34cc-ed5f-4550-8458-4456b9da9bf1\">Do Not Allow Developers to Change Their Application's Trust Level</a>\n      <li>\n        <a href=\"/article/5a4ca787-30a1-487c-be5d-9d849aaaca36\">Choose a Trust Level that does Not Exceed the Application's Requirements</a>\n        <li>\n          <a href=\"/article/29d960c8-3bc8-469b-957e-b6845a00f02d\">Isolate Applications using Medium Trust in Hosted Environments</a>\n          <li>\n            <a href=\"/article/fab1733c-61d7-46a8-88c6-2617a643c0d9\">Use Least Privileged Accounts for Database Access</a>\n          </li>\n        </li>\n      </li>\n    </li>\n  </ul>\n  <hr />\n  <p>Adapted from Microsoft patterns & practices guidance. </p>"
        ]
      }
    ]
  }
}