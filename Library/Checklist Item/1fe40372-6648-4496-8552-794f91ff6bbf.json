{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "-1976970964",
      "Content_Hash": "-928934679"
    },
    "Metadata": [
      {
        "Id": [
          "1fe40372-6648-4496-8552-794f91ff6bbf"
        ],
        "Id_History": [
          "1fe40372-6648-4496-8552-794f91ff6bbf,f1a71814-f2c1-4df3-acb9-0188b37c181c,"
        ],
        "Library_Id": [
          "be5273b1-d682-4361-99d9-6234f2d47eb7"
        ],
        "Title": [
          "[SINK] Connection Strings Are Secured"
        ],
        "Category": [
          "Database Security"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          ".NET 3.5"
        ],
        "Type": [
          "Checklist Item"
        ],
        "DirectLink": [
          "Connection Strings Are Secured"
        ],
        "Tag": [
          "ASP.NET,ASP.NET 3.5,ASP"
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          "2"
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>What to Check For</h1>\r\n  <p>Ensure that the application's credentials to the backend database server are protected.</p>\r\n  <h1>Why</h1>\r\n  <p>If an attacker gains access to the application's credentials to the backend database, the attacker could access the database with all the permissions allowed for the application.</p>\r\n  <h1>How to Check</h1>\r\n  <p>If your application connects to a backend database server, it is essential to protect your application's connection strings. Take the following steps to ensure that your application's connection strings are secured:</p>\r\n  <ol>\r\n    <li>\r\n      <p>\r\n        <strong>Check that Windows authentication is used when possible. </strong>The biggest advantage of using Windows authentication in your application is that no credentials are required in the connection string. </p>\r\n      <li>\r\n        <p>\r\n          <strong>Verify that connection strings are stored securely. </strong>Ensure that connection strings are handled securely throughout your application's code base. Focus your attention on the following items:</p>\r\n        <ul>\r\n          <li>\r\n            <p />\r\n            <strong>Strings are not hard-coded:</strong> Verify that no connection strings are hard-coded into your application's code base. The following is an example of a hard-coded connection string: <p /><pre>  static void Main()<br />  &#123;<br />        string connectionString = GetConnectionString();<br />        string queryString = \"SELECT CategoryID, CategoryName FROM Categories;\";<br />        ....<br />  &#125;<br /><br />  static private string GetConnectionString()<br />  &#123;<br />        return \"Data Source=myds;Database=mydb;Uid=myuname;Pwd=mypwd;\";<br />  &#125;</pre><li><p><strong>Strings are stored in configuration file and encrypted:</strong> Ensure that your application stores its connection strings in a configuration file. It is recommended to place the&nbsp;password for the keystore in a file separate from the other application&nbsp;properties files. This way it can have additional security compared to other application files.&nbsp;Verify that the connection string is not easily readable when stored in the web.config file by encrypting it using either DPAPI or RSA, depending on how the application is to be deployed. This would look something like the following:</p><pre>&lt;connectionStrings&gt;<br />  &lt;EncryptedData&gt;<br />    &lt;CipherData&gt;<br />      &lt;CipherValue&gt;GHAFQEW234A21...&lt;/CipherValue&gt;<br />    &lt;/CipherData&gt;<br />  &lt;/EncryptedData&gt;<br />&lt;/connectionStrings&gt;</pre></li></li>\r\n        </ul>\r\n        <li>\r\n          <p>\r\n            <strong>Ensure that configuration files are protected. </strong>Verify the following:</p>\r\n          <ul>\r\n            <li>The configuration file has appropriate filesystem permissions so that it can be accessed only by your application and its administrators. <li>The configuration file is placed in a separate directory that is not web-accessible.</li></li>\r\n          </ul>\r\n          <li>\r\n            <p>\r\n              <strong>Ensure connection to database server is encrypted. </strong>Encrypting the connection between your application and the database server protects the database credentials when your application initially authenticates to the backend database.</p>\r\n          </li>\r\n        </li>\r\n      </li>\r\n    </li>\r\n  </ol>\r\n  <h1>Problem Example</h1>\r\n  <p>An ASP.NET application contains the following connection string in its web.config file:</p>\r\n  <pre>&lt;appSettings&gt;<br />  &lt;add key=\"ConnectionString\" value=\"Data Source=myds;Database=mydb;Uid=myuname;Pwd=mypwd;\"/&gt;<br />&lt;/appSettings&gt;</pre>\r\n  <p>Since the username and password are in plaintext, they would be easily readable by any attacker who gains access to the server.</p>\r\n  <h1>Related Guideline</h1>\r\n  <ul>\r\n    <li>\r\n      <a href=\"/article/e1992e93-39c6-4508-9b16-0e07b0939c37\">Guideline: Secure Connection Strings </a>\r\n      <li>\r\n        <a href=\"/article/693e1ae5-e381-41fd-93f7-844aaeca3ef8\">Checklist Item: Sensitive Data Inside Configuration Files is Protected </a>\r\n      </li>\r\n    </li>\r\n  </ul>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns & practices guidance. </p>"
        ]
      }
    ]
  }
}