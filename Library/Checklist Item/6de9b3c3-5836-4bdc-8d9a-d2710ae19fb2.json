{
  "TeamMentor_Article": {
    "$": {
      "Metadata_Hash": "-1508131239",
      "Content_Hash": "100697934"
    },
    "Metadata": [
      {
        "Id": [
          "6de9b3c3-5836-4bdc-8d9a-d2710ae19fb2"
        ],
        "Id_History": [
          "6de9b3c3-5836-4bdc-8d9a-d2710ae19fb2,03a59d1b-dbcd-448a-ab3f-affd2a0aae54,"
        ],
        "Library_Id": [
          "be5273b1-d682-4361-99d9-6234f2d47eb7"
        ],
        "Title": [
          "[SINK] SQL Queries Use Parameterized Stored Procedures And Type-safe SQL Parameters"
        ],
        "Category": [
          "Database Security"
        ],
        "Phase": [
          "Implementation"
        ],
        "Technology": [
          ".NET 3.5"
        ],
        "Type": [
          "Checklist Item"
        ],
        "DirectLink": [
          "SQL Queries Use Parameterized Stored Procedures And Type-safe SQL Parameters"
        ],
        "Tag": [
          "ASP.NET,ASP.NET 3.5,ASP"
        ],
        "Security_Demand": [
          ""
        ],
        "Author": [
          ""
        ],
        "Priority": [
          "2"
        ],
        "Status": [
          ""
        ],
        "Source": [
          "SI"
        ]
      }
    ],
    "Content": [
      {
        "$": {
          "Sanitized": "true",
          "DataType": "Html"
        },
        "Data": [
          "<h1>What to Check For</h1>\r\n  <p>Ensure that your application uses parameterized stored procedures and type-safe SQL parameters when constructing SQL queries.</p>\r\n  <h1>How to Fix</h1>\r\n  <p>Use type safe parameters when constructing SQL queries to avoid possible SQL injection attacks that can occur with unfiltered input. You can use type safe parameters with stored procedures and with dynamic SQL statements. Parameters are treated as literal values by the database and not as executable code. Parameters are also checked for type and length.</p>\r\n  <p>The following code shows how to use type safe parameters with the <b>SqlParameterCollection</b> when calling a stored procedure.</p>\r\n  <p>\r\n    <pre>using System.Data;<br />using System.Data.SqlClient;<br />using (SqlConnection connection = new SqlConnection(connectionString))<br />&#123;<br /> DataSet userDataset = new DataSet();<br /> SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure\", connection);<br /> myCommand.SelectCommand.CommandType = CommandType.StoredProcedure;<br /> myCommand.SelectCommand.Parameters.Add(\"&#64;au_id\", SqlDbType.VarChar, 11);<br /> myCommand.SelectCommand.Parameters&#91;\"&#64;au_id\"&#93;.Value = SSN.Text;<br /> myCommand.Fill(userDataset);<br />&#125;  </pre>\r\n  </p>\r\n  <p>In the preceding code example, the input value cannot be longer than 11 characters. If the data does not conform to the type or length defined by the parameter, the <b>SqlParameter</b> class throws an exception.</p>\r\n  <h1>Additional Resources</h1>\r\n  <p>For more information about preventing SQL injection, see <a href=\"http://msdn2.microsoft.com/en-us/library/ms998271.aspx\">HOW TO: Protect from SQL Injection in ASP.NET</a>&nbsp;on MSDN.</p>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns & practices guidance. </p>"
        ]
      }
    ]
  }
}