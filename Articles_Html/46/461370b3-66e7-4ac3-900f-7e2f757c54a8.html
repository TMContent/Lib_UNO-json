<h2>Applies To</h2>
<ul>
<li>ASP.NET 4.0+</li>
</ul>
<h2>Summary</h2>
<p>Use a global exception handler to catch unhandled exceptions. A global exception handler improves the application's robustness and minimizes the risk of information disclosure.</p>
<p>Unhandled exceptions can be a serious stumbling block to an application's performance and security. Unhandled exceptions must be avoided as they can result in the application entering an unknown state and/or revealing sensitive internal application details. Using a global exception handler will prevent unhandled exceptions.</p>
<h2>Problem Example</h2>
<p>An ASP.NET application connects to a SQL database. However, the application does not have a generic error handler specified. As a result, when the connection times out application details are revealed to the client in the exception.</p>
<h2>Solution Example</h2>
<p>An ASP.NET application has code to connect to a SQL database. It has defined an application-level global error handler to trap and log all unhandled exceptions. This allows the application to present a generic error message to the client while logging more detailed information to the server.</p>
<pre><code>&lt;%@ Application Language=&quot;C#&quot; %&gt;
&lt;%@ Import Namespace=&quot;System.Diagnostics&quot; %&gt;
 &lt;script language=&quot;C#&quot; runat=&quot;server&quot;&gt;
 void Application_Error(object sender, EventArgs e)
 {
     // Add the appropriate logging code
     Exception ex = Server.GetLastError();
     if (ex.GetType().Name.Equals(&quot;SQLException&quot;))
     { 
        Server.Transfer(&quot;dbError.html&quot;);
     }
     else
     {
         Server.Transfer(&quot;genericError.html&quot;);
     }
         Server.ClearError();
 }
 &lt;/script&gt;
</code></pre>
<hr>
<p>Adapted from Microsoft patterns &amp; practices guidance.</p>
