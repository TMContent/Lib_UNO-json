{
  "id": "c7e3ea7d-a8fa-44d0-880e-a6059873bc16",
  "checksum": "0845091d788efa94fd777a635d6030cfeb088880",
  "words": {
    "what": [
      "h1"
    ],
    "to": [
      "h1",
      "p",
      "p",
      "h1",
      "p",
      "p",
      "p",
      "pre",
      "pre",
      "h1",
      "p",
      "p",
      "pre",
      "pre",
      "p",
      "p",
      "p",
      "p",
      "p",
      "pre",
      "pre",
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a"
    ],
    "check": [
      "h1",
      "h1"
    ],
    "for": [
      "h1",
      "ul",
      "li",
      "a",
      "p",
      "p",
      "ul",
      "li",
      "a"
    ],
    "ensure": [
      "p",
      "p",
      "p"
    ],
    "that": [
      "p",
      "p"
    ],
    "exceptions": [
      "p",
      "p",
      "p",
      "ul",
      "li",
      "a",
      "p",
      "p",
      "p",
      "ul",
      "li",
      "a"
    ],
    "are": [
      "p",
      "ul",
      "li",
      "a",
      "title"
    ],
    "logged": [
      "p",
      "ul",
      "li",
      "a",
      "title"
    ],
    "the": [
      "p",
      "p",
      "p",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "p",
      "p",
      "p",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "ul",
      "li",
      "a",
      "title"
    ],
    "server": [
      "p",
      "p",
      "p",
      "ul",
      "li",
      "a",
      "title"
    ],
    "allow": [
      "p"
    ],
    "further": [
      "p",
      "p"
    ],
    "analysis": [
      "p",
      "p"
    ],
    "and": [
      "p",
      "p",
      "p",
      "pre",
      "p",
      "pre",
      "p",
      "p",
      "p",
      "p",
      "p",
      "pre",
      "ul",
      "li",
      "a"
    ],
    "debugging": [
      "p",
      "p",
      "p"
    ],
    "why": [
      "h1"
    ],
    "malicious": [
      "p",
      "p",
      "p"
    ],
    "attacks": [
      "p"
    ],
    "may": [
      "p"
    ],
    "result": [
      "p"
    ],
    "in": [
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "application": [
      "p",
      "p",
      "pre",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "pre"
    ],
    "contain": [
      "p"
    ],
    "critical": [
      "p"
    ],
    "information": [
      "p",
      "p",
      "p"
    ],
    "on": [
      "p",
      "title"
    ],
    "problems": [
      "p",
      "p"
    ],
    "which": [
      "p"
    ],
    "occur": [
      "p",
      "p"
    ],
    "production": [
      "p"
    ],
    "systems logging": [
      "p"
    ],
    "them": [
      "p",
      "p"
    ],
    "will": [
      "p",
      "p"
    ],
    "help": [
      "p"
    ],
    "track": [
      "p"
    ],
    "down": [
      "p"
    ],
    "faster": [
      "p"
    ],
    "how": [
      "h1",
      "h1"
    ],
    "that your": [
      "p"
    ],
    "uses": [
      "p"
    ],
    "structured": [
      "p",
      "ul",
      "li",
      "a",
      "ul",
      "li",
      "a"
    ],
    "exception": [
      "p",
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "p",
      "p",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "p",
      "p",
      "pre",
      "pre",
      "pre",
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "title"
    ],
    "handling": [
      "p",
      "ul",
      "li",
      "a",
      "ul",
      "li",
      "a"
    ],
    "employs": [
      "p"
    ],
    "a": [
      "p",
      "ul",
      "li",
      "a",
      "p",
      "p",
      "p",
      "p"
    ],
    "global": [
      "p",
      "ul",
      "li",
      "a",
      "p",
      "p",
      "ul",
      "li",
      "a"
    ],
    "error": [
      "p",
      "p",
      "p",
      "ul",
      "li",
      "a"
    ],
    "handler": [
      "p",
      "ul",
      "li",
      "a",
      "p",
      "p"
    ],
    "see": [
      "p"
    ],
    "checklist": [
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "ul",
      "ul",
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "li",
      "a",
      "li",
      "a"
    ],
    "item": [
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "ul",
      "ul",
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "li",
      "a",
      "li",
      "a"
    ],
    "is": [
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "ul",
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "li",
      "a"
    ],
    "used": [
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "ul",
      "ul",
      "ul",
      "li",
      "a",
      "li",
      "a",
      "li",
      "a"
    ],
    "unhandled": [
      "ul",
      "li",
      "a",
      "ul",
      "li",
      "a"
    ],
    "all": [
      "p",
      "p"
    ],
    "handlers": [
      "p",
      "ul",
      "li",
      "a"
    ],
    "code": [
      "p",
      "p",
      "p"
    ],
    "exists": [
      "p"
    ],
    "log": [
      "p",
      "pre",
      "pre",
      "p",
      "p",
      "pre",
      "pre",
      "p",
      "pre",
      "pre",
      "ul",
      "li",
      "a"
    ],
    "details": [
      "p",
      "pre",
      "pre",
      "p",
      "p",
      "pre",
      "ul",
      "li",
      "a",
      "title"
    ],
    "server code": [
      "p"
    ],
    "be": [
      "p"
    ],
    "similar": [
      "p",
      "p"
    ],
    "this": [
      "p",
      "p",
      "p"
    ],
    "//get": [
      "pre",
      "pre",
      "pre"
    ],
    "reference": [
      "pre",
      "pre",
      "pre"
    ],
    "source": [
      "pre",
      "pre",
      "pre"
    ],
    "of": [
      "pre",
      "pre",
      "pre",
      "pre",
      "p",
      "p",
      "p",
      "p",
      "pre",
      "pre"
    ],
    "chain": [
      "pre",
      "pre",
      "pre"
    ],
    "ex": [
      "pre",
      "pre",
      "pre"
    ],
    "=": [
      "pre",
      "pre",
      "pre"
    ],
    "servergetlasterror().getbaseexception();": [
      "pre",
      "pre",
      "pre"
    ],
    "//": [
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre"
    ],
    "page": [
      "pre",
      "pre",
      "pre"
    ],
    "state": [
      "pre",
      "pre",
      "pre"
    ],
    "event": [
      "pre",
      "p",
      "pre",
      "pre"
    ],
    "eventlogwriteentry(\"my": [
      "pre",
      "pre",
      "pre"
    ],
    "web": [
      "pre",
      "pre",
      "pre"
    ],
    "application\"": [
      "pre",
      "pre",
      "pre"
    ],
    "\"message": [
      "pre",
      "pre",
      "pre"
    ],
    "\"": [
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre"
    ],
    "+": [
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre",
      "pre"
    ],
    "exmessage": [
      "pre",
      "pre",
      "pre"
    ],
    "\"\\nsource": [
      "pre",
      "pre",
      "pre"
    ],
    "exsource,": [
      "pre",
      "pre",
      "pre"
    ],
    "eventlogentrytypeerror);": [
      "pre",
      "pre",
      "pre"
    ],
    "fix": [
      "h1"
    ],
    "you": [
      "p"
    ],
    "should": [
      "p",
      "p"
    ],
    "record": [
      "p"
    ],
    "tracking": [
      "p"
    ],
    "later": [
      "p"
    ],
    "analysis event": [
      "p"
    ],
    "logging": [
      "p",
      "ul",
      "li",
      "a"
    ],
    "try/catch/finally": [
      "p"
    ],
    "blocks": [
      "p"
    ],
    "as": [
      "p",
      "p"
    ],
    "well": [
      "p"
    ],
    "use": [
      "p"
    ],
    "following": [
      "p"
    ],
    "try": [
      "strong"
    ],
    "catch": [
      "strong",
      "ul",
      "li",
      "a"
    ],
    "finally": [
      "strong"
    ],
    "%@": [
      "pre",
      "pre",
      "pre",
      "pre"
    ],
    "language=\"c#\"": [
      "pre",
      "pre",
      "pre",
      "pre"
    ],
    "%": [
      "pre",
      "pre",
      "pre",
      "pre"
    ],
    "import": [
      "pre",
      "pre"
    ],
    "namespace=\"systemdiagnostics\"": [
      "pre",
      "pre"
    ],
    "script": [
      "pre",
      "pre"
    ],
    "runat=\"server\"": [
      "pre",
      "pre"
    ],
    "void": [
      "pre",
      "pre"
    ],
    "application_errorobject": [
      "pre",
      "pre"
    ],
    "sender": [
      "pre",
      "pre"
    ],
    "eventargs": [
      "pre",
      "pre"
    ],
    "e": [
      "pre",
      "pre"
    ],
    "{": [
      "pre",
      "pre"
    ],
    "optional": [
      "pre",
      "pre"
    ],
    "e-mail": [
      "pre",
      "pre"
    ],
    "or": [
      "pre",
      "pre"
    ],
    "other": [
      "pre",
      "pre"
    ],
    "notification": [
      "pre",
      "pre"
    ],
    "here..": [
      "pre",
      "pre"
    ],
    "}": [
      "pre",
      "pre"
    ],
    "/script>": [
      "pre",
      "pre"
    ],
    "problem": [
      "h1"
    ],
    "example": [
      "h1",
      "h1"
    ],
    "an": [
      "p",
      "p"
    ],
    "aspnet": [
      "p",
      "p"
    ],
    "under": [
      "p",
      "p"
    ],
    "attack": [
      "p",
      "p",
      "p",
      "p"
    ],
    "by": [
      "p",
      "p",
      "p"
    ],
    "user": [
      "p",
      "p",
      "ul",
      "li",
      "a"
    ],
    "one": [
      "p",
      "p"
    ],
    "side": [
      "p",
      "p"
    ],
    "effect": [
      "p",
      "p"
    ],
    "set": [
      "p",
      "p"
    ],
    "when": [
      "p",
      "p"
    ],
    "connecting": [
      "p",
      "p"
    ],
    "retrieving": [
      "p",
      "p"
    ],
    "data": [
      "p",
      "p",
      "ul",
      "li",
      "a"
    ],
    "from": [
      "p",
      "p",
      "p"
    ],
    "database unfortunately": [
      "p"
    ],
    "doesn't": [
      "p"
    ],
    "so": [
      "p",
      "p"
    ],
    "auditing": [
      "p",
      "p",
      "ul",
      "li",
      "a"
    ],
    "lost": [
      "p"
    ],
    "forever": [
      "p"
    ],
    "solution": [
      "h1"
    ],
    "database fortunately": [
      "p"
    ],
    "logs": [
      "p"
    ],
    "discovered": [
      "p"
    ],
    "site": [
      "p"
    ],
    "admin": [
      "p"
    ],
    "delivered": [
      "p"
    ],
    "development": [
      "p"
    ],
    "team": [
      "p"
    ],
    "related": [
      "h1"
    ],
    "items": [
      "h1"
    ],
    "health": [
      "ul",
      "li",
      "a"
    ],
    "monitoring": [
      "ul",
      "li",
      "a"
    ],
    "events": [
      "ul",
      "li",
      "a"
    ],
    "sensitive": [
      "ul",
      "li",
      "a"
    ],
    "not": [
      "ul",
      "li",
      "a"
    ],
    "adapted": [
      "p"
    ],
    "microsoft": [
      "p"
    ],
    "patterns": [
      "p"
    ],
    "&": [
      "p"
    ],
    "practices": [
      "p"
    ],
    "guidance": [
      "p"
    ]
  },
  "tags": {
    "h1": [
      "What to Check For",
      "Why",
      "How to Check",
      "How to Fix",
      "Problem Example",
      "Solution Example",
      "Related Items"
    ],
    "p": [
      "Ensure that exceptions are logged to the server to allow further analysis and debugging.",
      "Malicious attacks may result in application exceptions. Exceptions contain critical information on problems which occur in production systems. Logging them will help track down problems faster.",
      "Ensure that your application uses structured exception handling and employs a global error handler. See:",
      "Ensure that in all exception handlers and the global error handler, code exists to log exception details to the server. Code will be similar to this:",
      "You should log all exceptions in the event log to record them for tracking and later analysis. Event logging should occur in Try/Catch/Finally blocks in code as well as in the global error handler. Use code similar to the following:",
      "An ASP.NET application is under attack by a malicious user. One side effect of the attack is a set of application exceptions when connecting to and retrieving data from the database. Unfortunately the application doesn't log exception details to the server, so this debugging and auditing information is lost forever.",
      "An ASP.NET application is under attack by a malicious user. One side effect of the attack is a set of application exceptions when connecting to and retrieving data from the database. Fortunately the application logs exception details to the server, so this debugging and auditing information is discovered by the site admin and delivered to the development team for further analysis.",
      "Adapted from Microsoft patterns & practices guidance."
    ],
    "ul": [
      "Checklist Item: A Global Exception Handler is used for Unhandled Exceptions\r\n      \r\n        Checklist Item: Structured Exception Handling is Used",
      "Log Exception Details to the Server\r\n      \r\n        Checklist Item: Global Error Handlers are Used to Catch Unhandled Exceptions\r\n        \r\n          Checklist Item: Structured Exception Handling is Used\r\n          \r\n            Checklist Item: Health Monitoring is Used for Logging and Auditing Events\r\n            \r\n              Checklist Item: Sensitive User Data is Not Logged"
    ],
    "li": [
      "Checklist Item: A Global Exception Handler is used for Unhandled Exceptions",
      "Checklist Item: Structured Exception Handling is Used",
      "Log Exception Details to the Server",
      "Checklist Item: Global Error Handlers are Used to Catch Unhandled Exceptions",
      "Checklist Item: Structured Exception Handling is Used",
      "Checklist Item: Health Monitoring is Used for Logging and Auditing Events",
      "Checklist Item: Sensitive User Data is Not Logged"
    ],
    "a": [
      "Checklist Item: A Global Exception Handler is used for Unhandled Exceptions",
      "Checklist Item: Structured Exception Handling is Used",
      "Log Exception Details to the Server",
      "Checklist Item: Global Error Handlers are Used to Catch Unhandled Exceptions",
      "Checklist Item: Structured Exception Handling is Used",
      "Checklist Item: Health Monitoring is Used for Logging and Auditing Events",
      "Checklist Item: Sensitive User Data is Not Logged"
    ],
    "pre": [
      "//get reference to the source of the exception chain    Exception ex = Server.GetLastError().GetBaseException();     // log the details of the exception and page state to the    // event log.    EventLog.WriteEntry(\"My Web Application\",      \"MESSAGE: \" + ex.Message +       \"\\nSOURCE: \" + ex.Source,       EventLogEntryType.Error);",
      "<%@ Application Language=\"C#\" %> <%@ Import Namespace=\"System.Diagnostics\" %>  <script language=\"C#\" runat=\"server\"> void Application_Error(object sender, EventArgs e) {    //get reference to the source of the exception chain    Exception ex = Server.GetLastError().GetBaseException();     // log the details of the exception and page state to the    // event log.    EventLog.WriteEntry(\"My Web Application\",      \"MESSAGE: \" + ex.Message +       \"\\nSOURCE: \" + ex.Source,       EventLogEntryType.Error);     // Optional e-mail or other notification here... }   </script>",
      "<%@ Application Language=\"C#\" %> <%@ Import Namespace=\"System.Diagnostics\" %>  <script language=\"C#\" runat=\"server\"> void Application_Error(object sender, EventArgs e) {    //get reference to the source of the exception chain    Exception ex = Server.GetLastError().GetBaseException();     // log the details of the exception and page state to the    // event log.    EventLog.WriteEntry(\"My Web Application\",      \"MESSAGE: \" + ex.Message +       \"\\nSOURCE: \" + ex.Source,       EventLogEntryType.Error);     // Optional e-mail or other notification here... }   </script>"
    ],
    "br": [
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      ""
    ],
    "strong": [
      "Try",
      "Catch",
      "Finally"
    ],
    "hr": [
      ""
    ]
  },
  "links": [
    {
      "href": "/article/4d3f994b-3be7-4e3d-8183-e213612cf5c4",
      "text": "Checklist Item: A Global Exception Handler is used for Unhandled Exceptions"
    },
    {
      "href": "/article/bc10306c-f37c-4780-a096-847070ae67da",
      "text": "Checklist Item: Structured Exception Handling is Used"
    },
    {
      "href": "/article/201ecd28-c916-4c83-92ea-7416fbf52987",
      "text": "Log Exception Details to the Server"
    },
    {
      "href": "/article/2e16a65a-25d2-4ea9-a513-e020d2408241",
      "text": "Checklist Item: Global Error Handlers are Used to Catch Unhandled Exceptions"
    },
    {
      "href": "/article/bc10306c-f37c-4780-a096-847070ae67da",
      "text": "Checklist Item: Structured Exception Handling is Used"
    },
    {
      "href": "/article/b24a7dd0-a01a-4cbb-8559-6d566f54bd6c",
      "text": "Checklist Item: Health Monitoring is Used for Logging and Auditing Events"
    },
    {
      "href": "/article/8d30acbe-f771-40fa-976d-3c5376d7bf08",
      "text": "Checklist Item: Sensitive User Data is Not Logged "
    }
  ],
  "html": "<h1>What to Check For</h1>\r\n  <p>Ensure that exceptions are logged to the server to allow further analysis and debugging.</p>\r\n  <h1>Why</h1>\r\n  <p>Malicious attacks may result in application exceptions. Exceptions contain critical information on problems which occur in production systems.&nbsp;Logging them will help track down problems faster. </p>\r\n  <h1>How to Check</h1>\r\n  <p>Ensure that&nbsp;your application uses structured exception handling and employs a global error handler. See:</p>\r\n  <ul>\r\n    <li>\r\n      <a href=\"/article/4d3f994b-3be7-4e3d-8183-e213612cf5c4\">Checklist Item: A Global Exception Handler is used for Unhandled Exceptions</a>\r\n      <li>\r\n        <a href=\"/article/bc10306c-f37c-4780-a096-847070ae67da\">Checklist Item: Structured Exception Handling is Used</a>\r\n      </li>\r\n    </li>\r\n  </ul>\r\n  <p>Ensure that in all exception handlers and the global error handler, code exists to log exception details to the server.&nbsp;Code will be similar to this:</p>\r\n  <pre>    //get reference to the source of the exception chain<br />    Exception ex = Server.GetLastError().GetBaseException();<br />     // log the details of the exception and page state to the<br />    // event log.<br />    EventLog.WriteEntry(\"My Web Application\",<br />      \"MESSAGE: \" &#43; ex.Message &#43;<br />       \"\\nSOURCE: \" &#43; ex.Source,<br />       EventLogEntryType.Error);</pre>\r\n  <h1>How to Fix</h1>\r\n  <p>You should log all exceptions in the event log to record them for tracking and later analysis.&nbsp;Event logging should occur in <strong>Try</strong>/<strong>Catch</strong>/<strong>Finally</strong> blocks in code as well as in the global error handler. Use code similar to the following:</p>\r\n  <pre>&lt;&#37;&#64; Application Language=\"C#\" &#37;&gt;<br /> &lt;&#37;&#64; Import Namespace=\"System.Diagnostics\" &#37;&gt;<br />  &lt;script language=\"C#\" runat=\"server\"&gt;<br /> void Application_Error(object sender, EventArgs e)<br /> &#123;<br />    //get reference to the source of the exception chain<br />    Exception ex = Server.GetLastError().GetBaseException();<br />     // log the details of the exception and page state to the<br />    // event log.<br />    EventLog.WriteEntry(\"My Web Application\",<br />      \"MESSAGE: \" &#43; ex.Message &#43;<br />       \"\\nSOURCE: \" &#43; ex.Source,<br />       EventLogEntryType.Error);<br />     // Optional e-mail or other notification here...<br /> &#125;<br />   &lt;/script&gt;</pre>\r\n  <h1>Problem Example</h1>\r\n  <p>An ASP.NET application is under attack by a malicious user. One side effect of the attack is a set of application exceptions when connecting to and retrieving data from the database.&nbsp;Unfortunately the application doesn't log exception details to the server, so this debugging and auditing information is lost forever.</p>\r\n  <h1>Solution Example</h1>\r\n  <p>An ASP.NET application is under attack by a malicious user. One side effect of the attack is a set of application exceptions when connecting to and retrieving data from the database.&nbsp;Fortunately the application logs exception details to the server, so this debugging and auditing information is discovered by the site admin and delivered to the development team for further analysis.</p>\r\n  <pre>&lt;&#37;&#64; Application Language=\"C#\" &#37;&gt;<br /> &lt;&#37;&#64; Import Namespace=\"System.Diagnostics\" &#37;&gt;<br />  &lt;script language=\"C#\" runat=\"server\"&gt;<br /> void Application_Error(object sender, EventArgs e)<br /> &#123;<br />    //get reference to the source of the exception chain<br />    Exception ex = Server.GetLastError().GetBaseException();<br />     // log the details of the exception and page state to the<br />    // event log.<br />    EventLog.WriteEntry(\"My Web Application\",<br />      \"MESSAGE: \" &#43; ex.Message &#43;<br />       \"\\nSOURCE: \" &#43; ex.Source,<br />       EventLogEntryType.Error);<br />     // Optional e-mail or other notification here...<br /> &#125;<br />   &lt;/script&gt;</pre>\r\n  <h1>Related Items</h1>\r\n  <ul>\r\n    <li>\r\n      <a href=\"/article/201ecd28-c916-4c83-92ea-7416fbf52987\">Log Exception Details to the Server</a>\r\n      <li>\r\n        <a href=\"/article/2e16a65a-25d2-4ea9-a513-e020d2408241\">Checklist Item: Global Error Handlers are Used to Catch Unhandled Exceptions</a>\r\n        <li>\r\n          <a href=\"/article/bc10306c-f37c-4780-a096-847070ae67da\">Checklist Item: Structured Exception Handling is Used</a>\r\n          <li>\r\n            <a href=\"/article/b24a7dd0-a01a-4cbb-8559-6d566f54bd6c\">Checklist Item: Health Monitoring is Used for Logging and Auditing Events</a>\r\n            <li>\r\n              <a href=\"/article/8d30acbe-f771-40fa-976d-3c5376d7bf08\">Checklist Item: Sensitive User Data is Not Logged </a>\r\n            </li>\r\n          </li>\r\n        </li>\r\n      </li>\r\n    </li>\r\n  </ul>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns & practices guidance. </p>"
}