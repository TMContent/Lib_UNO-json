{
  "id": "b42bbac5-7441-436a-92a5-a0d05593c62c",
  "checksum": "6348302ee968e4471dcf2f9aa02867598237f12c",
  "words": {
    "40": [
      "ul",
      "li"
    ],
    "applies": [
      "h1"
    ],
    "to": [
      "h1",
      "h1",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "strong",
      "li",
      "li",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "aspnet": [
      "ul",
      "li",
      "ol",
      "li",
      "p",
      "p"
    ],
    "what": [
      "h1"
    ],
    "do": [
      "h1",
      "ol",
      "li",
      "p"
    ],
    "use": [
      "p",
      "p",
      "p",
      "ol",
      "li",
      "p",
      "p",
      "p"
    ],
    "the": [
      "p",
      "p",
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "strong",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "strong",
      "li",
      "li",
      "li",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "rsa": [
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "title"
    ],
    "protected": [
      "p",
      "p",
      "p"
    ],
    "configuration": [
      "p",
      "p",
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "strong",
      "li",
      "li",
      "p",
      "strong",
      "p",
      "p"
    ],
    "provider": [
      "p",
      "p",
      "ol",
      "li",
      "p",
      "p"
    ],
    "encrypt": [
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "li",
      "li",
      "p",
      "p",
      "strong",
      "p",
      "p",
      "title"
    ],
    "sections": [
      "p",
      "p",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "strong"
    ],
    "of": [
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "li",
      "p",
      "p",
      "p"
    ],
    "your": [
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p",
      "li",
      "li",
      "li",
      "p",
      "p",
      "strong",
      "p"
    ],
    "files": [
      "p",
      "p",
      "p"
    ],
    "you": [
      "p",
      "ol",
      "li",
      "p"
    ],
    "can": [
      "p",
      "p",
      "p",
      "p"
    ],
    "aspnet_regiisexe": [
      "p",
      "em"
    ],
    "tool": [
      "p"
    ],
    "sensitive": [
      "p",
      "p",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p",
      "p"
    ],
    "data": [
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "li",
      "p",
      "li",
      "p",
      "strong",
      "p",
      "pre",
      "pre"
    ],
    "such": [
      "p"
    ],
    "as": [
      "p",
      "p",
      "p",
      "p"
    ],
    "connection": [
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p",
      "p",
      "title"
    ],
    "strings": [
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "title"
    ],
    "held": [
      "p"
    ],
    "in": [
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "webconfig": [
      "p",
      "em",
      "ol",
      "ol",
      "li",
      "p",
      "em",
      "li",
      "p",
      "em",
      "p",
      "em",
      "p",
      "p",
      "em",
      "p",
      "em"
    ],
    "and": [
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "li",
      "p",
      "p",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "machineconfig": [
      "p",
      "em"
    ],
    "why": [
      "h1"
    ],
    "contain": [
      "p"
    ],
    "resource": [
      "p",
      "p"
    ],
    "access": [
      "p",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p"
    ],
    "credentials": [
      "p"
    ],
    "e.g.,": [
      "p"
    ],
    "a": [
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p",
      "li",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "string": [
      "p",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p",
      "p"
    ],
    "for": [
      "p",
      "p",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "li",
      "p",
      "p",
      "p",
      "p"
    ],
    "sql": [
      "p",
      "p",
      "p",
      "p",
      "title"
    ],
    "server": [
      "p",
      "p",
      "p",
      "p",
      "ol",
      "li",
      "p"
    ],
    "includes": [
      "p"
    ],
    "username": [
      "p",
      "p"
    ],
    "password)": [
      "p"
    ],
    "stored": [
      "p",
      "p"
    ],
    "plaintext": [
      "p"
    ],
    "are": [
      "p",
      "ol",
      "li",
      "p"
    ],
    "dangerous": [
      "p"
    ],
    "because": [
      "p",
      "ol",
      "li",
      "p"
    ],
    "an": [
      "p",
      "p",
      "p",
      "p"
    ],
    "attacker": [
      "p"
    ],
    "that": [
      "p",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "p"
    ],
    "compromise": [
      "p"
    ],
    "will": [
      "p",
      "p",
      "ol",
      "li",
      "p",
      "p"
    ],
    "be": [
      "p",
      "p",
      "ol",
      "ol",
      "li",
      "p",
      "strong",
      "li",
      "p",
      "p",
      "p",
      "p"
    ],
    "able": [
      "p",
      "p",
      "p"
    ],
    "read": [
      "p"
    ],
    "those": [
      "p"
    ],
    "even": [
      "p"
    ],
    "if": [
      "p",
      "p",
      "ol",
      "li",
      "p"
    ],
    "machine": [
      "p",
      "p",
      "ol",
      "ol",
      "li",
      "p",
      "strong",
      "li",
      "p"
    ],
    "is": [
      "p",
      "p",
      "p",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p",
      "p",
      "p",
      "p"
    ],
    "not": [
      "p",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "li",
      "p",
      "p"
    ],
    "compromised": [
      "p"
    ],
    "plain": [
      "p"
    ],
    "text are": [
      "p"
    ],
    "accessible": [
      "p",
      "p"
    ],
    "administrators": [
      "p"
    ],
    "any": [
      "p"
    ],
    "other": [
      "p",
      "ol",
      "li",
      "p"
    ],
    "users": [
      "p"
    ],
    "with": [
      "p",
      "ol",
      "li",
      "p",
      "title"
    ],
    "sufficient": [
      "p"
    ],
    "privileges on": [
      "p"
    ],
    "host": [
      "p"
    ],
    "and/or": [
      "p"
    ],
    "windows": [
      "p"
    ],
    "domain": [
      "p"
    ],
    "when": [
      "h1"
    ],
    "always": [
      "p"
    ],
    "in a": [
      "p",
      "p"
    ],
    "web": [
      "p",
      "p",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "title"
    ],
    "farm": [
      "p",
      "p",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "environment the": [
      "p"
    ],
    "effective": [
      "p"
    ],
    "way": [
      "p"
    ],
    "decrypt": [
      "p",
      "p"
    ],
    "file": [
      "p",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "li",
      "p",
      "strong",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "sections because": [
      "p"
    ],
    "it": [
      "p"
    ],
    "uses": [
      "p",
      "p",
      "p",
      "p"
    ],
    "asymmetric": [
      "p"
    ],
    "encryption": [
      "p",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p"
    ],
    "decrypt meaning the": [
      "p"
    ],
    "keys": [
      "p"
    ],
    "easily": [
      "p"
    ],
    "exported": [
      "p"
    ],
    "imported from": [
      "p"
    ],
    "application": [
      "p",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "no": [
      "p",
      "p"
    ],
    "deployed": [
      "p"
    ],
    "environment": [
      "p",
      "p",
      "p"
    ],
    "dpapi": [
      "p"
    ],
    "work": [
      "p",
      "ol",
      "li",
      "p"
    ],
    "well": [
      "p"
    ],
    "encrypting": [
      "p",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p"
    ],
    "how": [
      "h1"
    ],
    "following": [
      "p",
      "ol",
      "li",
      "p",
      "p"
    ],
    "steps": [
      "p"
    ],
    "identify": [
      "ol",
      "li",
      "p",
      "strong"
    ],
    "encrypted": [
      "ol",
      "li",
      "p",
      "strong",
      "p"
    ],
    "decrypting": [
      "ol",
      "li",
      "p"
    ],
    "incurs": [
      "ol",
      "li",
      "p"
    ],
    "performance": [
      "ol",
      "li",
      "p"
    ],
    "overhead": [
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p"
    ],
    "keep": [
      "ol",
      "li",
      "p"
    ],
    "this": [
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p"
    ],
    "minimum": [
      "ol",
      "li",
      "p"
    ],
    "only": [
      "ol",
      "li",
      "p"
    ],
    "store": [
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "li",
      "p",
      "p",
      "strong",
      "li",
      "li",
      "p",
      "p"
    ],
    "case": [
      "ol",
      "li",
      "p"
    ],
    "we": [
      "ol",
      "li",
      "p"
    ],
    "interested": [
      "ol",
      "li",
      "p"
    ],
    "connectionstrings>": [
      "ol",
      "li",
      "p",
      "pre",
      "pre"
    ],
    "element": [
      "ol",
      "li",
      "p"
    ],
    "since": [
      "ol",
      "li",
      "p",
      "p"
    ],
    "where": [
      "ol",
      "li",
      "p"
    ],
    "database": [
      "ol",
      "li",
      "p",
      "p",
      "p",
      "p",
      "p",
      "p"
    ],
    "reside": [
      "ol",
      "li",
      "p"
    ],
    "choose": [
      "ol",
      "li",
      "p",
      "strong"
    ],
    "or": [
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "strong"
    ],
    "user": [
      "ol",
      "li",
      "p",
      "strong"
    ],
    "dataprotectionconfigurationprovider": [
      "ol",
      "li",
      "p"
    ],
    "supports": [
      "ol",
      "li",
      "p"
    ],
    "machine-level": [
      "ol",
      "li",
      "p"
    ],
    "user-level": [
      "ol",
      "li",
      "p"
    ],
    "stores": [
      "ol",
      "li",
      "p"
    ],
    "key": [
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "p"
    ],
    "storage": [
      "ol",
      "li",
      "p"
    ],
    "choice": [
      "ol",
      "li",
      "p"
    ],
    "depends": [
      "ol",
      "li",
      "p"
    ],
    "largely": [
      "ol",
      "li",
      "p"
    ],
    "on": [
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p",
      "p",
      "title"
    ],
    "whether": [
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p"
    ],
    "shares": [
      "ol",
      "li",
      "p"
    ],
    "applications": [
      "ol",
      "li",
      "p",
      "p"
    ],
    "must": [
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p"
    ],
    "kept": [
      "ol",
      "li",
      "p"
    ],
    "private": [
      "ol",
      "li",
      "p"
    ],
    "each": [
      "ol",
      "ol",
      "li",
      "p",
      "li",
      "p"
    ],
    "create": [
      "ol",
      "li",
      "p"
    ],
    "custom": [
      "ol",
      "li",
      "p"
    ],
    "container": [
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p"
    ],
    "deploy": [
      "ol",
      "li",
      "p"
    ],
    "same": [
      "ol",
      "li",
      "p",
      "p",
      "p"
    ],
    "all": [
      "ol",
      "li",
      "p",
      "p",
      "p"
    ],
    "servers": [
      "ol",
      "li",
      "p"
    ],
    "won't": [
      "ol",
      "li",
      "p"
    ],
    "by": [
      "ol",
      "li",
      "p",
      "p",
      "p"
    ],
    "default": [
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p"
    ],
    "\"netframeworkconfigurationkey\"": [
      "ol",
      "li",
      "p"
    ],
    "different": [
      "ol",
      "li",
      "p"
    ],
    "computer": [
      "ol",
      "li",
      "p"
    ],
    "run the": [
      "ol",
      "li",
      "p"
    ],
    "command": [
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p",
      "p"
    ],
    "from": [
      "ol",
      "li",
      "p",
      "p",
      "p"
    ],
    "net": [
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "p"
    ],
    "prompt": [
      "ol",
      "li",
      "p"
    ],
    "connectionstrings": [
      "ol",
      "em",
      "li",
      "p",
      "em",
      "p",
      "p",
      "em",
      "em"
    ],
    "section": [
      "ol",
      "li",
      "p",
      "p",
      "p",
      "p"
    ],
    "using": [
      "ol",
      "li",
      "p"
    ],
    "level": [
      "ol",
      "li",
      "p",
      "p"
    ],
    "aspnet_regiis": [
      "ol",
      "li",
      "pre",
      "pre"
    ],
    "-pe": [
      "ol",
      "li",
      "pre",
      "pre"
    ],
    "\"connectionstrings\"": [
      "ol",
      "li",
      "pre",
      "pre"
    ],
    "-app": [
      "ol",
      "li",
      "pre",
      "pre"
    ],
    "\"/machinersa\"": [
      "ol",
      "li",
      "pre",
      "pre"
    ],
    "note": [
      "ol",
      "li",
      "p",
      "strong"
    ],
    "identity": [
      "ol",
      "li",
      "p"
    ],
    "does": [
      "ol",
      "li",
      "p"
    ],
    "have": [
      "ol",
      "li",
      "p"
    ],
    "framework": [
      "ol",
      "li",
      "p"
    ],
    "you'll": [
      "ol",
      "li",
      "p"
    ],
    "need": [
      "ol",
      "li",
      "p",
      "p"
    ],
    "grant": [
      "ol",
      "li",
      "p"
    ],
    "netframeworkconfigurationkey": [
      "em"
    ],
    "problem": [
      "h1"
    ],
    "example": [
      "h1",
      "h1"
    ],
    "running": [
      "p",
      "p"
    ],
    "instance": [
      "p",
      "p"
    ],
    "has": [
      "p",
      "p"
    ],
    "should": [
      "p"
    ],
    "to other": [
      "p"
    ],
    "system the": [
      "p"
    ],
    "contains": [
      "p",
      "p"
    ],
    "connectionstring": [
      "p",
      "em",
      "p",
      "em"
    ],
    "that the": [
      "p",
      "p"
    ],
    "across": [
      "p",
      "p"
    ],
    "machines": [
      "p",
      "p"
    ],
    "add": [
      "pre",
      "pre",
      "p"
    ],
    "name=\"mylocalsqlserver\"": [
      "pre",
      "pre"
    ],
    "connectionstring=\"initial": [
      "pre",
      "pre"
    ],
    "catalog=pubsuser": [
      "pre",
      "pre"
    ],
    "id=sapassword=asdasd;": [
      "pre",
      "pre"
    ],
    "source=localhostintegrated": [
      "pre",
      "pre"
    ],
    "security=sspi\"": [
      "pre",
      "pre"
    ],
    "providername=\"systemdata.sqlclient\"/></connectionstrings>": [
      "pre",
      "pre"
    ],
    "unfortunately anyone": [
      "p"
    ],
    "capable": [
      "p"
    ],
    "reading": [
      "p"
    ],
    "now": [
      "p"
    ],
    "see": [
      "p"
    ],
    "password": [
      "p"
    ],
    "execute": [
      "p"
    ],
    "statements": [
      "p"
    ],
    "at": [
      "p",
      "p",
      "p"
    ],
    "privilege": [
      "p"
    ],
    "solution": [
      "h1"
    ],
    "rsaprotectedconfigurationprovider with": [
      "p"
    ],
    "the machine": [
      "p",
      "p"
    ],
    "key store": [
      "p",
      "p"
    ],
    "encrypt the": [
      "p"
    ],
    "configure": [
      "p"
    ],
    "run": [
      "p"
    ],
    "rsaprotectedconfigurationprovider": [
      "em"
    ],
    "point": [
      "p"
    ],
    "been": [
      "p"
    ],
    "which": [
      "p"
    ],
    "verified": [
      "p"
    ],
    "looking": [
      "p"
    ],
    "there": [
      "p"
    ],
    "hand": [
      "p"
    ],
    "handles": [
      "p"
    ],
    "transparently": [
      "p"
    ],
    "adapted": [
      "p"
    ],
    "microsoft": [
      "p"
    ],
    "patterns": [
      "p"
    ],
    "&": [
      "p"
    ],
    "practices": [
      "p"
    ],
    "guidance": [
      "p"
    ],
    "farms": [
      "title"
    ]
  },
  "tags": {
    "h1": [
      "Applies To",
      "What to Do",
      "Why",
      "When",
      "How",
      "Problem Example",
      "Solution Example"
    ],
    "ul": [
      "ASP.NET 4.0"
    ],
    "li": [
      "ASP.NET 4.0",
      "Identify the configuration sections to be encrypted. Encrypting and decrypting data incurs performance overhead. To keep this overhead to a minimum, encrypt only the sections of your configuration file that store sensitive data. In this case, we are interested in encrypting the <connectionStrings> element of the Web.config file since that is where the database connection string will reside.",
      "Choose the machine or user store. The DataProtectionConfigurationProvider supports machine-level and user-level stores for key storage. The choice of store depends largely on whether or not your application shares a server with other applications and whether or not sensitive data must be kept private for each application.",
      "Encrypt your configuration file data. Use the RSA Provider to Encrypt a Connection String in Web.config in a Web Farm. To do this, you must create a custom RSA encryption key container and deploy the same key container on all servers in your Web farm. This won't work by default because the default RSA encryption key, \"NetFrameworkConfigurationKey\", is different for each computer.\r\n      Run the following command from a .NET command prompt to encrypt the connectionStrings section using the machine level store:\r\n      aspnet_regiis -pe \"connectionStrings\" -app \"/MachineRSA\"\r\n      \r\n        Note: If your ASP.NET application identity does not have access to the .NET Framework configuration key store, you'll need to grant access."
    ],
    "p": [
      "Use the RSA Protected Configuration provider to encrypt sections of your configuration files. You can use Aspnet_regiis.exe tool to encrypt sensitive data, such as connection strings, held in the Web.config and Machine.config files.",
      "Connection strings contain sensitive resource access credentials (e.g., a connection string for a SQL server resource includes a username and password.) Connection strings stored in plaintext are dangerous, because an attacker that can compromise a server will be able to read those connection strings. Even if a machine is not compromised, connection strings stored in plain text are accessible to administrators and any other users with sufficient privileges on the host machine and/or Windows domain.",
      "Always encrypt connection strings. In a web farm environment, the RSA protected configuration provider is an effective way to encrypt and decrypt configuration file sections because it uses asymmetric encryption to encrypt and decrypt, meaning the keys can easily be exported and imported from server to server.  If the application is no deployed to a web farm environment DPAPI will work as well as RSA for encrypting connection strings.",
      "Use the following steps to encrypt sections of your configuration files:",
      "Identify the configuration sections to be encrypted. Encrypting and decrypting data incurs performance overhead. To keep this overhead to a minimum, encrypt only the sections of your configuration file that store sensitive data. In this case, we are interested in encrypting the <connectionStrings> element of the Web.config file since that is where the database connection string will reside.",
      "Choose the machine or user store. The DataProtectionConfigurationProvider supports machine-level and user-level stores for key storage. The choice of store depends largely on whether or not your application shares a server with other applications and whether or not sensitive data must be kept private for each application.",
      "Encrypt your configuration file data. Use the RSA Provider to Encrypt a Connection String in Web.config in a Web Farm. To do this, you must create a custom RSA encryption key container and deploy the same key container on all servers in your Web farm. This won't work by default because the default RSA encryption key, \"NetFrameworkConfigurationKey\", is different for each computer.",
      "Run the following command from a .NET command prompt to encrypt the connectionStrings section using the machine level store:",
      "Note: If your ASP.NET application identity does not have access to the .NET Framework configuration key store, you'll need to grant access.",
      "A web application is running in a web farm environment. The application uses an SQL database instance and has sensitive data that should not be accessible to other applications on the same system. The Web.config file contains a connectionString section that the application uses to access the SQL database across all machines in the farm:",
      "Unfortunately, anyone capable of reading the web.config file for the application is now able to see the database, the username, and the password for the database instance, and will be able to execute statements at the same level of privilege as the application.",
      "The Web.config file for an application running in a web farm environment contains a connectionString section that the application uses to access the SQL database across all machines in the farm:",
      "Use RSAProtectedConfigurationProvider with the machine key store to encrypt the connectionStrings section. Add and configure a protected configuration provider to use the machine key store and run the following command from to encrypt the connectionStrings:",
      "At this point the connection string has been encrypted, which can be verified by looking at the Web.config file. There is no need to decrypt the file by hand, since ASP.NET handles this transparently.",
      "Adapted from Microsoft patterns & practices guidance."
    ],
    "em": [
      "Aspnet_regiis.exe",
      "Web.config",
      "Machine.config",
      "connectionStrings",
      "Web.config",
      "Web.config",
      "NetFrameworkConfigurationKey",
      "connectionStrings",
      "Web.config",
      "connectionString",
      "Web.config",
      "connectionString",
      "RSAProtectedConfigurationProvider",
      "connectionStrings",
      "connectionStrings",
      "Web.config"
    ],
    "ol": [
      "Identify the configuration sections to be encrypted. Encrypting and decrypting data incurs performance overhead. To keep this overhead to a minimum, encrypt only the sections of your configuration file that store sensitive data. In this case, we are interested in encrypting the <connectionStrings> element of the Web.config file since that is where the database connection string will reside. \r\n    \r\n    \r\n      \r\n        Choose the machine or user store. The DataProtectionConfigurationProvider supports machine-level and user-level stores for key storage. The choice of store depends largely on whether or not your application shares a server with other applications and whether or not sensitive data must be kept private for each application. \r\n    \r\n    \r\n      \r\n        Encrypt your configuration file data. Use the RSA Provider to Encrypt a Connection String in Web.config in a Web Farm. To do this, you must create a custom RSA encryption key container and deploy the same key container on all servers in your Web farm. This won't work by default because the default RSA encryption key, \"NetFrameworkConfigurationKey\", is different for each computer.\r\n      Run the following command from a .NET command prompt to encrypt the connectionStrings section using the machine level store:\r\n      aspnet_regiis -pe \"connectionStrings\" -app \"/MachineRSA\"\r\n      \r\n        Note: If your ASP.NET application identity does not have access to the .NET Framework configuration key store, you'll need to grant access."
    ],
    "strong": [
      "Identify the configuration sections to be encrypted.",
      "Choose the machine or user store.",
      "Encrypt your configuration file data.",
      "Note"
    ],
    "pre": [
      "aspnet_regiis -pe \"connectionStrings\" -app \"/MachineRSA\"",
      "<connectionStrings>  <add name=\"MyLocalSQLServer\"        \tconnectionString=\"Initial Catalog=pubs;User Id=sa;Password=asdasd;       \tdata source=localhost;Integrated Security=SSPI;\"      \tproviderName=\"System.Data.SqlClient\"/></connectionStrings>",
      "<connectionStrings>  <add name=\"MyLocalSQLServer\"        \tconnectionString=\"Initial Catalog=pubs;User Id=sa;Password=asdasd;       \tdata source=localhost;Integrated Security=SSPI;\"       \tproviderName=\"System.Data.SqlClient\"/></connectionStrings>",
      "aspnet_regiis -pe \"connectionStrings\" -app \"/MachineRSA\""
    ],
    "br": [
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      ""
    ],
    "hr": [
      ""
    ]
  },
  "links": [],
  "html": "<h1>Applies To</h1>\r\n  <ul>\r\n    <li>ASP.NET 4.0</li>\r\n  </ul>\r\n  <h1>What to Do</h1>\r\n  <p>Use the RSA Protected Configuration provider to encrypt sections of your configuration files. You can use <em>Aspnet_regiis.exe</em> tool to encrypt sensitive data, such as connection strings, held in the <em>Web.config</em> and <em>Machine.config</em> files.&nbsp;&nbsp;&nbsp;&nbsp;</p>\r\n  <h1>Why</h1>\r\n  <p>Connection strings contain sensitive resource access credentials (e.g., a connection string for a SQL server resource includes a username and password.) Connection strings stored in plaintext are dangerous, because an attacker that can compromise a server will be able to read those connection strings. Even if a machine is not compromised, connection strings stored in plain text&nbsp;are accessible to administrators and any other users with sufficient privileges&nbsp;on the host machine and/or Windows domain.&nbsp;</p>\r\n  <h1>When</h1>\r\n  <p>Always encrypt connection strings. In&nbsp;a web farm environment,&nbsp;the RSA protected configuration provider is an effective way to encrypt and decrypt configuration file sections&nbsp;because it uses asymmetric encryption to encrypt and decrypt,&nbsp;meaning&nbsp;the keys can easily be exported and imported&nbsp;from server to server.&nbsp; If the application is no deployed to a web farm environment DPAPI will work as well as RSA for encrypting connection strings.&nbsp; </p>\r\n  <h1>How</h1>\r\n  <p>Use the following steps to encrypt sections of your configuration files: </p>\r\n  <ol>\r\n    <li>\r\n      <p>\r\n        <strong>Identify the configuration sections to be encrypted.</strong> Encrypting and decrypting data incurs performance overhead. To keep this overhead to a minimum, encrypt only the sections of your configuration file that store sensitive data. In this case, we are interested in encrypting the &lt;<em>connectionStrings</em>&gt; element of the <em>Web.config</em> file since that is where the database connection string will reside. </p>\r\n    </li>\r\n    <li>\r\n      <p>\r\n        <strong>Choose the machine or user store.</strong> The DataProtectionConfigurationProvider supports machine-level and user-level stores for key storage. The choice of store depends largely on whether or not your application shares a server with other applications and whether or not sensitive data must be kept private for each application. </p>\r\n    </li>\r\n    <li>\r\n      <p>\r\n        <strong>Encrypt your configuration file data.</strong> Use the RSA Provider to Encrypt a Connection String in <em>Web.config</em> in a Web Farm. To do this, you must create a custom RSA encryption key container and deploy the same key container on all servers in your Web farm. This won't work by default because the default RSA encryption key, \"<em>NetFrameworkConfigurationKey</em>\", is different for each computer.</p>\r\n      <p>Run&nbsp;the following command from a .NET command prompt to encrypt the <em>connectionStrings</em> section using the machine level store:</p>\r\n      <pre>aspnet_regiis -pe \"connectionStrings\" -app \"/MachineRSA\"</pre>\r\n      <p>\r\n        <strong>Note</strong>: If your ASP.NET application identity does not have access to the .NET Framework configuration key store, you'll need to grant access.</p>\r\n    </li>\r\n  </ol>\r\n  <h1>Problem Example</h1>\r\n  <p>A web application is running in&nbsp;a web farm environment. The application uses an SQL database instance and has sensitive data that should not be accessible to&nbsp;other applications on the same system.&nbsp;The <em>Web.config</em> file contains a <em>connectionString</em> section that&nbsp;the application uses to access the SQL database across all machines in the farm:</p>\r\n  <pre>&lt;connectionStrings&gt;  <br />&lt;add name=\"MyLocalSQLServer\"        <br />\tconnectionString=\"Initial Catalog=pubs;User Id=sa;Password=asdasd;       <br />\tdata source=localhost;Integrated Security=SSPI;\"      <br />\tproviderName=\"System.Data.SqlClient\"/&gt;<br />&lt;/connectionStrings&gt;</pre>\r\n  <p>Unfortunately,&nbsp;anyone capable of reading the web.config file for the application is now able to see the database, the username, and the password for the database instance, and will be able to execute statements at the same level of privilege as the application.</p>\r\n  <h1>Solution Example</h1>\r\n  <p>The <em>Web.config</em> file for an application running in a web farm environment contains a <em>connectionString</em> section that&nbsp;the application uses to access the SQL database across all machines in the farm:</p>\r\n  <pre>&lt;connectionStrings&gt;  <br />&lt;add name=\"MyLocalSQLServer\"        <br />\tconnectionString=\"Initial Catalog=pubs;User Id=sa;Password=asdasd;       <br />\tdata source=localhost;Integrated Security=SSPI;\"       <br />\tproviderName=\"System.Data.SqlClient\"/&gt;<br />&lt;/connectionStrings&gt;</pre>\r\n  <p>Use <em>RSAProtectedConfigurationProvider</em>&nbsp;with the&nbsp;machine key&nbsp;store to encrypt&nbsp;the <em>connectionStrings</em> section. Add and configure a protected configuration provider to use the&nbsp;machine key&nbsp;store and run the following command from to encrypt the <em>connectionStrings</em>:</p>\r\n  <pre>aspnet_regiis -pe \"connectionStrings\" -app \"/MachineRSA\"</pre>\r\n  <p>At this point the connection string has been encrypted, which can be verified by looking at the <em>Web.config</em> file. There is no need to decrypt the file by hand, since ASP.NET handles this transparently.&nbsp;</p>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns & practices guidance. </p>"
}