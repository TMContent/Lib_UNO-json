<h1>Applies to</h1>
  <p>C&#43;&#43;</p>
  <h1>What to Check For</h1>
  <p>Verify that debug assertions are not used for error handling.</p>
  <h1>Why</h1>
  <p>Debug assertions are compiled out of production code, so they should not be relied on for error handling in a production environment.</p>
  <h1>How to Check</h1>
  <p>Search code for the "assert" operator. Verify that assertions are not used for error handling.</p>
  <h1>How to Fix</h1>
  <p>Identify code that uses the "assert" operator. Rewrite code to implement functional error handling without using the debug assertion.</p>
  <h1>Problem Example</h1>
  <p>In the following example, the read API is called and then the return value is checked for errors in an assertion. </p>
  <pre>bool ReadFromSocket(SOCKET socket, char &#42;recvBuffer, int len)<br />&#123;<br />&nbsp; //first read from the socket<br />&nbsp; int ret = read(socket, recvBuffer, len, 0);<br />&nbsp; assert(ret &gt;= 0)<br />&nbsp; return parseBuffer(recvBuffer, len);<br />&#125;</pre>
  <h1>Solution Example</h1>
  <p>In the following example, the read API is called and then the return value is checked for errors. </p>
  <pre>bool ReadFromSocket(SOCKET socket, char &#42;recvBuffer, int len)<br />&#123;<br />&nbsp; //first read from the socket<br />&nbsp; int ret = read(socket, recvBuffer, len, 0);<br />&nbsp; if (ret &gt;= 0)<br />&nbsp; &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //now parse the buffer<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return parseBuffer(recvBuffer, len);<br />&nbsp; &#125;<br />&nbsp; else<br />&nbsp; &#123;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //can call WSAGetLastError if we need error details<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return false;<br />&nbsp; &#125;<br />&#125;</pre>
  <h1>Related Items</h1>
  <ul>
    <li>
      <a href="/article/b2050dca-6329-4360-b218-070305fe6890">Do Not Use Asserts for Error Handling</a>
    </li>
  </ul>