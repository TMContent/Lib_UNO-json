<h1>What to Do</h1>
  <p>Prevent direct access to your database server.</p>
  <h1>Why</h1>
  <p>Direct access allows an attacker to use tools such as Query Analyzer (Isqlw.exe) and establish a connection to the SQL Server and issue commands. This could lead to unauthorized access to data.</p>
  <h1>When</h1>
  <p>When using a SQL backend with your application.</p>
  <h1>How</h1>
  <p>To restrict access to your SQL Server:</p>
  <ul>
    <li>
      <p>
        <strong>From the outside</strong>: Configure the firewall to make sure that SQL Server ports (TCP 1433 and UDP 1434 by default) are not visible from outside of the perimeter network. </p>
    </li>
    <li>
      <p>
        <strong>From within the perimeter</strong>: Restrict direct access by unauthorized internal hosts via internal firewalls when available, and by using IPSec and port filtering. IPSec can be used for computer authentication in addition to encryption and can be used to ensure that only the specific application server can connect to the database server, in order to prevent attacks from other computers.</p>
    </li>
    <li>
      <p>
        <strong>Minimize exposure</strong>: The production database server should only be accessible from the application server(s) it works with and a minimum set of other maintenance systems for monitoring, external logging, backup, and administration. Development and production systems should not share the same database server, and development machines should not have access to the production servers.</p>
    </li>
  </ul>
  <h1>Problem Example</h1>
  <p>A financial firm uses a web application to allow its agents to interact with the company database. To prevent attackers, the firm uses a firewall which restricts attackers from accessing the database server. However, one of the workstations inside the firewall gets infected with malware. This workstation is exploited by attackers to scan the internal network. When the attackers discover the SQL Server, they use tools such as the Query Analyzer to connect to and issue commands to it, using the compromised workstation as a proxy.</p>
  <h1>Solution Example</h1>
  <p>A financial firm uses a web application to allow its agents to interact with the company database. To prevent outside attackers the firm uses a firewall and to prevent internal threats to the database the firm uses IPSec to restrict access. Now when one of the workstations inside the firewall gets infected with malware and is exploited by attackers to scan the internal network, the attackers will not discover the SQL Server and will not be able to connect or issue commands to it.</p>
  <br />
  <hr />
  <p>Adapted from Microsoft patterns & practices guidance.</p>