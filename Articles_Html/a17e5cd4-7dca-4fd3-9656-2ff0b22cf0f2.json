{
  "id": "a17e5cd4-7dca-4fd3-9656-2ff0b22cf0f2",
  "checksum": "938440ad693240018251ca45ddd0656cf2bd571b",
  "words": {
    "2": [
      "p"
    ],
    "35": [
      "ul",
      "li",
      "ul",
      "li"
    ],
    "2008": [
      "ul",
      "li"
    ],
    "applies": [
      "h1"
    ],
    "to": [
      "h1",
      "p",
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "title"
    ],
    "microsoft®": [
      "ul",
      "li"
    ],
    "windows": [
      "ul",
      "li",
      "p",
      "ol",
      "li",
      "title"
    ],
    "communication": [
      "ul",
      "li"
    ],
    "foundation": [
      "ul",
      "li"
    ],
    "wcf)": [
      "ul",
      "li"
    ],
    "microsoft": [
      "ul",
      "li",
      "p"
    ],
    "visual": [
      "ul",
      "li"
    ],
    "studio®": [
      "ul",
      "li"
    ],
    "description": [
      "h1"
    ],
    "when": [
      "p"
    ],
    "using": [
      "p",
      "ol",
      "li",
      "li"
    ],
    "non-windows": [
      "p"
    ],
    "authentication": [
      "p",
      "p",
      "p",
      "title"
    ],
    "like": [
      "p"
    ],
    "certificate": [
      "p"
    ],
    "or": [
      "p",
      "p"
    ],
    "username": [
      "p",
      "ol",
      "li"
    ],
    "if": [
      "p",
      "p"
    ],
    "you": [
      "p",
      "p",
      "ol",
      "li",
      "p"
    ],
    "need": [
      "p"
    ],
    "impersonate": [
      "p",
      "title"
    ],
    "the": [
      "p",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "li",
      "li",
      "li",
      "li",
      "li",
      "p",
      "p",
      "p",
      "ul",
      "li",
      "title"
    ],
    "original": [
      "p",
      "title"
    ],
    "caller": [
      "p",
      "title"
    ],
    "it": [
      "p"
    ],
    "has": [
      "p"
    ],
    "account": [
      "p",
      "p",
      "ol",
      "li"
    ],
    "a": [
      "p"
    ],
    "service": [
      "p",
      "ol",
      "li"
    ],
    "have": [
      "p",
      "ol",
      "li",
      "p"
    ],
    "following": [
      "p"
    ],
    "options": [
      "p"
    ],
    "s4u": [
      "ol",
      "li",
      "p"
    ],
    "kerberos": [
      "ol",
      "li",
      "p"
    ],
    "extensions": [
      "ol",
      "li",
      "p"
    ],
    "-": [
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "li"
    ],
    "for": [
      "ol",
      "li",
      "ul",
      "li",
      "li"
    ],
    "this": [
      "ol",
      "ol",
      "li",
      "li",
      "p"
    ],
    "must": [
      "ol",
      "li"
    ],
    "grant": [
      "ol",
      "li"
    ],
    "your": [
      "ol",
      "li",
      "p",
      "p",
      "p"
    ],
    "process": [
      "ol",
      "li",
      "p",
      "p"
    ],
    "\"act": [
      "ol",
      "li"
    ],
    "as": [
      "ol",
      "li"
    ],
    "part": [
      "ol",
      "li"
    ],
    "of": [
      "ol",
      "ol",
      "li",
      "li",
      "p",
      "ul",
      "li"
    ],
    "operating": [
      "ol",
      "li"
    ],
    "system\"": [
      "ol",
      "li"
    ],
    "user": [
      "ol",
      "ol",
      "ol",
      "li",
      "li",
      "li"
    ],
    "rightusing": [
      "ol"
    ],
    "logonuser": [
      "ol",
      "li",
      "strong"
    ],
    "api": [
      "ol",
      "li"
    ],
    "needs": [
      "ol",
      "li"
    ],
    "access": [
      "ol",
      "li"
    ],
    "credentials": [
      "ol",
      "ol",
      "li",
      "li"
    ],
    "and": [
      "ol",
      "li",
      "p",
      "ul",
      "ul",
      "ul",
      "li",
      "li",
      "li"
    ],
    "password": [
      "ol",
      "li"
    ],
    "which": [
      "ol",
      "li",
      "p"
    ],
    "increases": [
      "ol",
      "li"
    ],
    "security": [
      "ol",
      "li"
    ],
    "risk": [
      "ol",
      "li"
    ],
    "maintaining": [
      "ol",
      "li"
    ],
    "in": [
      "ol",
      "li"
    ],
    "wcf": [
      "ol",
      "li"
    ],
    "right": [
      "li"
    ],
    "note": [
      "p",
      "strong"
    ],
    "places": [
      "p"
    ],
    "within": [
      "p"
    ],
    "trusted": [
      "p"
    ],
    "computing": [
      "p"
    ],
    "base": [
      "p"
    ],
    "tcb)": [
      "p"
    ],
    "web": [
      "p",
      "p",
      "p"
    ],
    "server": [
      "p",
      "p"
    ],
    "makes": [
      "p"
    ],
    "very": [
      "p"
    ],
    "highly": [
      "p"
    ],
    "privileged": [
      "p"
    ],
    "where": [
      "p"
    ],
    "possible": [
      "p"
    ],
    "should": [
      "p"
    ],
    "avoid": [
      "p"
    ],
    "approach": [
      "p"
    ],
    "because": [
      "p"
    ],
    "an": [
      "p"
    ],
    "attacker": [
      "p"
    ],
    "who": [
      "p"
    ],
    "manages": [
      "p"
    ],
    "inject": [
      "p"
    ],
    "code": [
      "p"
    ],
    "compromise": [
      "p"
    ],
    "application": [
      "p"
    ],
    "will": [
      "p"
    ],
    "unrestricted": [
      "p"
    ],
    "capabilities": [
      "p"
    ],
    "on": [
      "p"
    ],
    "local": [
      "p"
    ],
    "computer": [
      "p"
    ],
    "additional": [
      "h1"
    ],
    "resources": [
      "h1"
    ],
    "more": [
      "ul",
      "li"
    ],
    "information": [
      "ul",
      "li"
    ],
    "see": [
      "ul",
      "ul",
      "li",
      "li"
    ],
    "“delegation": [
      "ul",
      "li"
    ],
    "impersonation": [
      "ul",
      "ul",
      "li",
      "li"
    ],
    "with": [
      "ul",
      "li"
    ],
    "wcf”": [
      "ul",
      "li"
    ],
    "at": [
      "ul",
      "ul",
      "li",
      "li"
    ],
    "http//msdn2.microsoft.com/en-us/library/ms730088.aspxfor": [
      "ul"
    ],
    "delegation": [
      "ul",
      "li"
    ],
    "q&a": [
      "ul",
      "li"
    ],
    "impersonation/delegation": [
      "ul",
      "li"
    ],
    "section": [
      "ul",
      "li"
    ],
    "“wcf": [
      "ul",
      "li"
    ],
    "questions": [
      "ul",
      "li"
    ],
    "answers“": [
      "ul",
      "li"
    ],
    "http//www.codeplex.com/wcfsecurityguide": [
      "ul",
      "li",
      "a"
    ],
    "http//msdn2.microsoft.com/en-us/library/ms730088.aspx": [
      "li",
      "a"
    ],
    "adapted": [
      "p"
    ],
    "from": [
      "p"
    ],
    "patterns": [
      "p"
    ],
    "&": [
      "p"
    ],
    "practices": [
      "p"
    ],
    "guidance": [
      "p"
    ],
    "how": [
      "title"
    ],
    "without": [
      "title"
    ]
  },
  "tags": {
    "h1": [
      "Applies to",
      "Description",
      "Additional Resources"
    ],
    "ul": [
      "Microsoft® Windows Communication Foundation (WCF) 3.5 Microsoft Visual Studio® 2008",
      "For more information, see “Delegation and Impersonation with WCF” at http://msdn2.microsoft.com/en-us/library/ms730088.aspxFor impersonation and delegation Q&A, see the Impersonation/Delegation section of “WCF 3.5 Questions and Answers“ at http://www.codeplex.com/WCFSecurityGuide"
    ],
    "li": [
      "Microsoft® Windows Communication Foundation (WCF) 3.5",
      "Microsoft Visual Studio® 2008",
      "Using the S4U Kerberos extensions - For this you must grant your process account the \"Act as part of the operating system\" user right.",
      "Using the LogonUser windows API - this needs to have access to the user credentials (username and password) - which increases the security risk of maintaining the user credentials in WCF Service.",
      "For more information, see “Delegation and Impersonation with WCF” at http://msdn2.microsoft.com/en-us/library/ms730088.aspx",
      "For impersonation and delegation Q&A, see the Impersonation/Delegation section of “WCF 3.5 Questions and Answers“ at http://www.codeplex.com/WCFSecurityGuide"
    ],
    "p": [
      "When using non-windows authentication like Certificate Authentication or username authentication, if you need to impersonate the original caller (if it has windows account) or a service account you have following 2 options",
      "Note: S4U Kerberos extensions places your process within the trusted computing base (TCB) of the Web server, which makes your Web server process very highly privileged. Where possible, you should avoid this approach because an attacker who manages to inject code and compromise your Web application will have unrestricted capabilities on the local computer.",
      "Adapted from Microsoft patterns & practices guidance."
    ],
    "ol": [
      "Using the S4U Kerberos extensions - For this you must grant your process account the \"Act as part of the operating system\" user right.Using the LogonUser windows API - this needs to have access to the user credentials (username and password) - which increases the security risk of maintaining the user credentials in WCF Service."
    ],
    "strong": [
      "LogonUser",
      "Note"
    ],
    "a": [
      "http://msdn2.microsoft.com/en-us/library/ms730088.aspx",
      "http://www.codeplex.com/WCFSecurityGuide"
    ],
    "hr": [
      ""
    ]
  },
  "links": [
    {
      "href": "http://msdn2.microsoft.com/en-us/library/ms730088.aspx",
      "text": "http://msdn2.microsoft.com/en-us/library/ms730088.aspx"
    },
    {
      "href": "http://www.codeplex.com/WCFSecurityGuide",
      "text": "http://www.codeplex.com/WCFSecurityGuide"
    }
  ],
  "html": "<h1>Applies to</h1>\r\n  <ul>\r\n    <li>Microsoft&#174; Windows Communication Foundation (WCF) 3.5 <li>Microsoft Visual Studio&#174; 2008</li></li>\r\n  </ul>\r\n  <h1>Description</h1>\r\n  <p>When using non-windows authentication like Certificate Authentication or username authentication, if you need to impersonate the original caller (if it has windows account) or a service account you have following 2 options </p>\r\n  <ol>\r\n    <li>Using the S4U Kerberos extensions - For this you must grant your process account the \"Act as part of the operating system\" user right.<li>Using the <strong>LogonUser </strong>windows API - this needs to have access to the user credentials (username and password) - which increases the security risk of maintaining the user credentials in WCF Service.</li></li>\r\n  </ol>\r\n  <p>\r\n    <strong>Note</strong>: S4U Kerberos extensions places your process within the trusted computing base (TCB) of the Web server, which makes your Web server process very highly privileged. Where possible, you should avoid this approach because an attacker who manages to inject code and compromise your Web application will have unrestricted capabilities on the local computer.</p>\r\n  <h1>Additional Resources</h1>\r\n  <ul>\r\n    <li>For more information, see &#8220;Delegation and Impersonation with WCF&#8221; at <a href=\"http://msdn2.microsoft.com/en-us/library/ms730088.aspx\">http://msdn2.microsoft.com/en-us/library/ms730088.aspx</a><li>For impersonation and delegation Q&A, see the Impersonation/Delegation section of &#8220;WCF 3.5 Questions and Answers&#8220; at <a href=\"http://www.codeplex.com/WCFSecurityGuide\">http://www.codeplex.com/WCFSecurityGuide</a></li></li>\r\n  </ul>\r\n  <hr />\r\n  <p>Adapted from Microsoft patterns & practices guidance.</p>"
}