<h1>Applies to</h1>
  <ul>
    <li>Microsoft&#174; Windows Communication Foundation (WCF) 3.5 <li>Microsoft Visual Studio&#174; 2008</li></li>
  </ul>
  <h1>Description</h1>
  <p>A replay attack occurs when an attacker copies a stream of messages between two parties and replays the stream to one or more of the parties. To protect against message replay attacks, enable replay detection in the service. </p>
  <p>The following steps show you how to enable replay detection:</p>
  <ol>
    <li>Create a customBinding Element.<li>Create a &lt;security&gt; element.<li>Create a localClientSettings element or localServiceSettings element.<li>Set the following attribute values, as appropriate: detectReplays, maxClockSkew, replayWindow, and replayCacheSize. </li></li></li></li>
  </ol>
  <p>The following example sets the attributes of both a &lt;localServiceSettings&gt; and a &lt;localClientSettings&gt; element:</p>
  <pre>&lt;customBinding&gt;<br />  &lt;binding name="NewBinding0"&gt;<br />   &lt;textMessageEncoding /&gt;<br />    &lt;security&gt;<br />     &lt;localClientSettings <br />      replayCacheSize="800000" <br />      maxClockSkew="00:03:00"<br />      replayWindow="00:03:00" /&gt;<br />     &lt;localServiceSettings <br />      replayCacheSize="800000" <br />      maxClockSkew="00:03:00"<br />      replayWindow="00:03:00" /&gt;<br />    &lt;secureConversationBootstrap /&gt;<br />   &lt;/security&gt;<br />  &lt;httpTransport /&gt;<br /> &lt;/binding&gt;<br />&lt;/customBinding&gt;</pre>
  <h1>Additional Resources</h1>
  <ul>
    <li>For more information on replay detection, see &#8220;How to: Enable Message Replay Detection&#8221; at <a href="http://msdn2.microsoft.com/en-us/library/ms733063.aspx">http://msdn2.microsoft.com/en-us/library/ms733063.aspx</a><li>For configuration management Q&A, see the Configuration Management section of &#8220;WCF 3.5 Questions and Answers &#8220; at <a href="http://www.codeplex.com/WCFSecurity/Wiki/View.aspx?title=Questions&#37;20and&#37;20Answers&referringTitle=Home">http://www.codeplex.com/WCFSecurity/Wiki/View.aspx?title=Questions&#37;20and&#37;20Answers&referringTitle=Home</a><br /></li></li>
  </ul>
  <hr />
  <p>Adapted from Microsoft patterns & practices guidance.</p>