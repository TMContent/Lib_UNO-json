<h1>Applies to</h1>
  <p>Applications written using Servlets or JSP.</p>
  <h1>What to Do</h1>
  <p>Sensitive data, such as encryption keys or private information, must be maintained in memory for the bare minimum amount of time required. As soon as the data is no longer is needed, it should be purged from memory. All traces of it must be eradicated, so it does not end up leaking to the swap file.</p>
  <h1>Why</h1>
  <p>Sensitive data residing in memory for more than is strictly necessary is at high risk to be swapped out to disk. This could leave fragments of data available well after the application has terminated. Such data may be gathered by inspecting the contents of the disk, temporary files or the swap file.</p>
  <h1>When</h1>
  <p>If your application handles sensitive data, clear it from memory when no longer used.&nbsp;</p>
  <h1>How</h1>
  <p>Sensitive data can be cleared by overwriting the memory where the sensitive data was stored. Deallocating the memory is not sufficient since the Java garbage collector gives no guarantee as to when the deallocated memory will be collected or reused. Be aware that any time you assign a sensitive data to a new buffer, or pass it as a parameter, the sensitive data is being copied and is now in memory in a new location. When clearing memory, ensure you clear every instance.</p>
  <p>Keep in mind the following considerations when handling passwords: </p>
  <ol>
    <li>
      <p>
        <strong>Identify sensitive information. </strong>Sensitive data is any information that is kept secret and should be disclosed only to authorized parties. Common examples of sensitive data include, but are not limited to, names of customers, government issued ID numbers, credit card and other financial information, passwords and private keys. Some industries, such as health care and banking, have regulatory standards that define sensitive information. Use regulatory requirements, as they apply to your application, to identify sensitive data. Sensitive data can be defined as follows:</p>
      <ul>
        <li>Information that either contains personally identifiable information or can be used to derive personally identifiable information that should not be shared with others. </li>
        <li>Information that a user provides that they would not want shared with other users of the application. </li>
        <li>Information that comes from an external trusted source that is not designed to be shared with users.</li>
      </ul>
    </li>
    <li>
      <p>
        <strong>Identify all sensitive data use. </strong>Locate all code segments, both functions and data members, that handle sensitive data. These functions and data structures can be scattered throughout your application. If&nbsp;the sensitive data in your code base is difficult to locate, centralize all code that handles sensitive data to make it easy to manage.</p>
    </li>
    <li>
      <p>
        <strong>Store sensitive data in mutable objects. </strong>Mutable objects allow the data in them to be overwritten. This is especially useful in Java as objects are required to be deallocated through the garbage collector. Therefore, there is no certainty when the sensitive data will be deallocated from the current process space. Examples of mutable objects include character arrays (i.e. <strong>char[]</strong>). Java strings, however, are not mutable objects; therefore, once allocated, their current memory space cannot be modified. When storing sensitive data into an array, make sure that you use arrays of primitive data types such as:</p>
      <ul>
        <li>
          <em>byte[] </em>
        </li>
        <li>
          <em>char []</em>
        </li>
        <li>
          <em>int[]<br /></em>
          <br />Do not use arrays of the wrapper classes that Java provides for primitive types such as: <p /></li>
        <li>
          <em>Byte </em>
        </li>
        <li>
          <em>Character </em>
        </li>
        <li>
          <em>Integer</em>
        </li>
      </ul>
    </li>
    <li>
      <p>
        <strong>Clear all sensitive data instances. </strong>Make sure that all memory locations where sensitive data has been stored are overwritten after their use. Losing a pointer to a sensitive data instance can result in not cleaning that particular memory and allowing the sensitive data to leak.</p>
    </li>
  </ol>
  <h1>Problem Example</h1>
  <p>The following code makes a use of a password. Although the pointer to the string is removed and garbage collection is called, Java does not guarantee the data will be erased.</p>
  <pre>String pass = getPassword();<br />...<br />pass = null;<br />System.gc();</pre>
  <h1>Solution Example</h1>
  <p>The following code makes use of a password. After the password is used, the memory is explicitly cleared. Since strings are immutable object, the code uses character arrays to store passwords. This makes it possible to overwrite the data after its use. </p>
  <pre>char[] pass = getPassword();<br />...<br />clearPassword(pass);<br />pass = null;<br />...<br />void clearPassword(char[] pass){<br />      for(int i=0; i&lt;_pass.length3b_&gt;<!--_pass.length3b_ --><br />      {<br />            pass[i] = ' ';<br />      }<br />}</pre>
  <br />