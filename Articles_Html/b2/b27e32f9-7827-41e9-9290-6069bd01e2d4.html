<h1>What to Check For</h1>
  <p>Ensure that XML style commenting is not used in JSP code.</p>
  <h1>Why</h1>
  <p>XML style comments in JSP code can be seen by the client. These comments may contain sensitive information that you don't want an attacker to access. This can also reveal source code if the developer gets confused and uses XML comments (<&#33;-- -->) in place of JSP comments (<&#37;-- xxx --&#37;>).</p>
  <h1>How to Check</h1>
  <p>Use the following steps to ensure that your application does not reveal sensitive information through improper use of comments:</p>
  <ol>
    <li>
      <p>
        <strong>Verify that all comments containing sensitive information have been identified</strong>. These are comments that could be related to specific JSP code and could provide important information about your application to a malicious user. </p>
      <li>
        <p>
          <strong>Ensure that JSP comment tags are used for JSP comments</strong>. Verify that your application's JSP code is commented using JSP or Java comments. The two formats are: </p>
        <pre><&#37;-- This is a sample JSP comment --&#37;><br /><br /><br /><&#37;<br />   // This is a Java comment inside a JSP block<br />&#37;></pre>
        <li>
          <p>
            <strong>Check if XML or HTML comments are used in the presentation layer. </strong>Examine your application's HTML output. Ensure that all important layout elements have been commented using XML style comments. The format should look like:</p>
          <pre><&#33;-- This is a sample XML/HTML comment --></pre>
        </li>
      </li>
    </li>
  </ol>
  <h1>How to Fix</h1>
  <p>Establish which comments should be seen by the browser and which comments should not, then apply the appropriate commenting styles to each. </p>
  <ul>
    <li>
      <p>Sensitive comments should be created using <em><&#37;-- ... --&#37;></em> tags</p>
      <p>Any comments related to your application's business logic should be treated as sensitive comments. Such comments include, but are not limited to, comments regarding server side performance, security, auditing and interactions with other software. For example, comments regarding database connectivity or queries should not be seen by the browser:</p>
      <pre><&#37;-- Connect to the back-up database server using a privileged account --&#37;><br />String connString = getConnectionString();<br />Properties prop = loadDatabaseCredentials();<br />DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());<br />Connection cn = DriverManager.getConnection(connString, prop);</pre>
      <li>
        <p>Comments that are ok for the browser to see should be created using<strong></strong><em><&#33;-- ... --></em> tags.</p>
        <p>Any comments related to your application's appearance can be displayed to the browser. Such comments include comments regarding graphical design, color schema and layout of your application's presentation layer. For example, comments concerning different regions in the generated page may be disclosed with the browser as they help the graphical designers and web developers design the presentation layer of your application:</p>
        <pre><&#33;-- The search engine's submission form --><br /><form method="post" action="sample.jsp"><br />  <input name="query" type="text" size="50"><br />  <input name="submit" value="search" type="submit"><br /></form></pre>
      </li>
    </li>
  </ul>
  <h1>Problem Example</h1>
  <p>The following code initiates a test for determining whether the browser supports cookies. Because the developers have used XML style commenting, the user can see all comments regarding the initiation procedure of this test.</p>
  <pre><&#33;-- Filename: /myapp/index.jsp --><br /><&#33;-- The application initiates a test that determines --><br /><&#33;-- whether cookies are enabled --><br /><&#37;Cookie testCookie = new Cookie("myappTestCookie","testVal");<br />testCookie.setMaxAge(300);<br />response.addCookie(testCookie);&#37;><br /><jsp:forward page="/myapp/login.jsp" /></pre>
  <h1>Solution Example</h1>
  <p>The following code initiates a test for determining whether the browser supports cookies. Because the developers have used JSP style commenting, the comments are visible only within the source code and not to the browser.</p>
  <pre><&#37;-- Filename: /myapp/index.jsp --&#37;><br /><&#37;-- The application initiates a test that determines --&#37;><br /><&#37;-- whether cookies are enabled --&#37;><br /><&#37;Cookie testCookie = new Cookie("myappTestCookie","testVal");<br />testCookie.setMaxAge(300);<br />response.addCookie(testCookie);&#37;><br /><jsp:forward page="/myapp/login.jsp" /></pre>
  <h1>Additional Resources</h1>
  <ul>
    <li>To learn more about JSP comments, see: <a href="http://java.sun.com/developer/technicalArticles/javaserverpages/code_convention/">Code Conventions for the JavaServer Pages Technology Version 1.x Language</a>.</li>
  </ul>
