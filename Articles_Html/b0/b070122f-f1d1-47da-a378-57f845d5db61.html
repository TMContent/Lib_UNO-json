<h2>Applies To</h2>
<ul>
<li>.NET</li>
</ul>
<h2>Summary</h2>
<p>Encrypt the communication channels when interacting with other software across the network. Encrypting the communication links allows the application to preserve confidentiality and integrity of the transmitted data.</p>
<h2>Problem Example</h2>
<p>The following code establishes a connection between two servers. Unfortunately, the communication is not encrypted and it is possible for an attacker to eavesdrop on the connection.</p>
<pre><code>public Stream Connect(string remoteHost, int remotePort)
{
    TcpClient client = new TcpClient(remoteHost, remotePort);
    NetworkStream netStream = client.GetStream();
    return netStream;
}
</code></pre>
<h2>Solution Example</h2>
<p>The following code establishes a connection between two servers. Because the communication is encrypted the confidentiality of the data in transit is preserved and it is impossible for an attacker to eavesdrop on the connection.</p>
<pre><code>public Stream Connect(string remoteHost, int remotePort)
{
    TcpClient client = new TcpClient(remoteHost, remotePort);
    SslStream netStream = new SslStream(client.GetStream(), false,
               new RemoteCertificateValidationCallback(this.ValidateSSLCertificate));
    try
    {
        netStream.AuthenticateAsClient(remoteHost);
    }
    catch (AuthenticationException ae)
    {
        client.Close();
        throw ae;
    }
    return netStream;
}
</code></pre>
<hr>
<p>Adapted from Microsoft patterns &amp; practices guidance.</p>
