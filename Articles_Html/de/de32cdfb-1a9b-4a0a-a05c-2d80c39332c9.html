<h1>Applies to</h1>
  <ul>
    <li>Microsoft&amp;#174; Windows Communication Foundation (WCF) 3.5 <li>Microsoft Visual Studio&amp;#174; 2008</li></li>
  </ul>
  <h1>Description</h1>
  <p>Roles-based authorization is used to group users into groups (roles) and then set permissions on the role rather than on individual users. This eases management by allowing you to administer a smaller set of roles rather than a larger set of users. </p>
  <p>The following are the different option for creating role-based authorization based on your authentication choice:</p>
  <ul>
    <li>If you are using Windows or Basic authentication, you can use Windows groups for role-based authorization <li>If you are using Username authentication, you can use ASPNET roles for role-based authorization <li>If you are using certificate authentication, you can map certificates to Windows groups for role-based authorization </li></li></li>
  </ul>
  <p>The following example configures the service to enable the SQL Role provider for using ASPNET roles.</p>
  <ol>
    <li>Configure the SQL Role provider<ol><pre>    &lt;&amp;#33;-- Configure the Sql Role Provider --&gt;<br />    &lt;roleManager enabled ="true" <br />                 defaultProvider ="SqlRoleProvider" &gt;<br />      &lt;providers&gt;<br />        &lt;add name ="SqlRoleProvider" <br />             type="System.Web.Security.SqlRoleProvider" <br />             connectionStringName="SqlConn" <br />             applicationName="MembershipAndRoleProviderSample"/&gt;<br />      &lt;/providers&gt;<br />    &lt;/roleManager&gt;<br />    &lt;&amp;#33;-- Configure role based authorization to use the Role Provider --&gt;<br />    &lt;serviceAuthorization principalPermissionMode ="UseAspNetRoles"<br />                          roleProviderName ="SqlRoleProvider" /&gt;</pre><div></div></ol><li>Include a PrincipalPermission attribute in the service method that specifies the required authorization access role required.<ol><pre>   &amp;#91;PrincipalPermission(SecurityAction.Demand, Role = "Registered Users")&amp;#93;<br />    public double Multiply(double n1, double n2)<br />      &amp;#123;<br />         double result = n1 &amp;#42; n2;<br />         return result;<br />      &amp;#125;</pre><div></div></ol><li>The following code shows how to do the authorization check in code: <ol><pre><br />if (Roles.IsUserInRole(&amp;#64;"accounting"))<br />&amp;#123;<br />//authorized<br />&amp;#125;<br />else<br />&amp;#123;<br />//authorization failed</pre><pre>&amp;#125;</pre></ol><li>The following client connection supplies a username and password to call the method.</li></li></li></li>
  </ol>
  <blockquote>
    <p />
    <div>
      <pre>      // Set credentials to Alice<br />      client.ClientCredentials.UserName.UserName = "Alice";<br />      client.ClientCredentials.UserName.Password = "ecilA-123";</pre>
    </div>
    <p />
    <p />
    <div>
      <pre>      // Call the Add service operation.<br />      double value1 = 100.00D;<br />      double value2 = 15.99D;<br />      double result = client.Multiply(value1, value2);<br /></pre>
    </div>
    <p />
  </blockquote>
  <h1>Additional Resources</h1>
  <ul>
    <li>For more information on authorization, see &amp;#8220;Authorization&amp;#8221; at <a href="http://msdn2.microsoft.com/en-us/library/ms733071.aspx">http://msdn2.microsoft.com/en-us/library/ms733071.aspx</a><li>For authorization Q&amp;A, see the Authorization section of &amp;#8220;WCF 3.5 Questions and Answers &amp;#8220; at <a href="http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=WCF&amp;#37;20Security&amp;#37;20Guidelines&amp;referringTitle=Home">http://www.codeplex.com/WCFSecurityGuide/Wiki/View.aspx?title=WCF&amp;#37;20Security&amp;#37;20Guidelines&amp;referringTitle=Home</a><br /></li></li>
  </ul>
  <hr />
  <p>Adapted from Microsoft patterns &amp; practices guidance.</p>